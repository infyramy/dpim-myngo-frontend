import{c as W,e as Z,b as Ve,a as Pe,_ as $,v as H,p as le,k as F,l as J,m as K,n as ee,o as te,s as B,g as Ne,h as Te,i as Fe,j as Ae,x as ge,q as Ue,r as Ie,z as Ct,u as ut,A as St,B as Qe,C as Bt,D as Nt,E as Tt,F as Ft}from"./ui-C-FEV6Jq.js";import{a as X}from"./admin-DxRhEtpx.js";import{b as Me,r as b,c as I,o as Ee,e as c,f as s,i as O,j as y,g as t,w as a,u as e,t as i,h as u,F as L,k as D,m as et,aM as ze,aN as Vt,aO as je,aP as At,aG as st,n as Q,l as r,aQ as We,aR as Oe,aS as nt,aL as rt,aT as Ze,aU as lt,aV as Je,aW as Ke,a as G,aX as pe,aY as at,aZ as dt,a_ as it,a$ as Pt,p as ct,v as Ut,b0 as It,aJ as ot,a5 as jt,b1 as Ot,am as Mt,b2 as Et,b3 as Lt,aH as Dt,b4 as qt,b5 as zt,ai as $t,az as Yt}from"./vendor-D6Gd-AmM.js";import{_ as Ht}from"./auth-DV8b8DmP.js";const Gt={class:"space-y-6"},Xt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Qt={class:"text-2xl font-bold"},Wt={class:"text-2xl font-bold"},Zt={class:"text-2xl font-bold"},Jt={class:"text-2xl font-bold"},Kt={class:"space-y-3"},es={class:"font-medium"},ts={class:"text-sm text-muted-foreground"},ss={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ls={key:0,class:"space-y-3"},as={class:"flex-1 min-w-0"},os={class:"font-medium truncate"},us={class:"text-sm text-muted-foreground"},ns={key:1,class:"text-center py-6 text-muted-foreground"},rs={key:0,class:"space-y-3"},ds={class:"font-medium"},is={class:"text-sm text-muted-foreground"},cs={key:1,class:"text-center py-6 text-muted-foreground"},ms={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},vs={class:"space-y-2"},fs={class:"flex items-center gap-2 text-sm"},ps={key:1,class:"w-4 h-4 rounded-full border-2 border-gray-300"},gs={class:"flex items-center gap-2 text-sm"},_s={key:1,class:"w-4 h-4 rounded-full border-2 border-gray-300"},xs={class:"flex items-center gap-2 text-sm"},bs={key:1,class:"w-4 h-4 rounded-full border-2 border-gray-300"},ys=Me({__name:"index",setup(se){const N=et(),V=b({statistics:{businessCount:0,productCount:0,activeListings:0,profileViews:0},recentProducts:[],businesses:[],pendingActions:[],profileComplete:!1,showGettingStarted:!0}),A=b(!0),E=b(null),p=I(()=>V.value.statistics.businessCount),U=I(()=>V.value.statistics.productCount),j=I(()=>V.value.statistics.activeListings),C=I(()=>V.value.statistics.profileViews),h=I(()=>V.value.profileComplete),Y=I(()=>V.value.recentProducts),P=I(()=>V.value.businesses),R=I(()=>V.value.pendingActions),S=I(()=>V.value.showGettingStarted),g=async()=>{try{A.value=!0,E.value=null;const f=await X().get("/dashboard",!0);console.log("Dashboard response:",f),V.value=f.data}catch(f){E.value=f.message,console.error("Dashboard API error:",f)}finally{A.value=!1}},v=f=>{switch(f){case"register-business":N.push("/user/businesses/add");break;case"add-product":N.push("/user/products");break;case"complete-profile":N.push("/profile");break;default:console.log(`Handle action: ${f}`)}};return Ee(()=>{g()}),(f,w)=>(r(),c("div",Gt,[w[19]||(w[19]=s("div",null,[s("h1",{class:"text-2xl font-bold"},"Dashboard"),s("p",{class:"text-muted-foreground"},"Overview of your business activities")],-1)),s("div",Xt,[t(e(Z),null,{default:a(()=>[t(e(W),{class:"p-4"},{default:a(()=>[w[4]||(w[4]=s("div",{class:"text-sm text-muted-foreground"},"Total Businesses",-1)),s("div",Qt,i(p.value),1)]),_:1,__:[4]})]),_:1}),t(e(Z),null,{default:a(()=>[t(e(W),{class:"p-4"},{default:a(()=>[w[5]||(w[5]=s("div",{class:"text-sm text-muted-foreground"},"Total Products",-1)),s("div",Wt,i(U.value),1)]),_:1,__:[5]})]),_:1}),t(e(Z),null,{default:a(()=>[t(e(W),{class:"p-4"},{default:a(()=>[w[6]||(w[6]=s("div",{class:"text-sm text-muted-foreground"},"Active Listings",-1)),s("div",Zt,i(j.value),1)]),_:1,__:[6]})]),_:1}),t(e(Z),null,{default:a(()=>[t(e(W),{class:"p-4"},{default:a(()=>[w[7]||(w[7]=s("div",{class:"text-sm text-muted-foreground"},"Profile Views",-1)),s("div",Jt,i(C.value),1)]),_:1,__:[7]})]),_:1})]),R.value.length>0?(r(),O(e(Z),{key:0},{default:a(()=>[t(e(Pe),null,{default:a(()=>[t(e(Ve),{class:"text-lg"},{default:a(()=>w[8]||(w[8]=[u("Action Required")])),_:1,__:[8]})]),_:1}),t(e(W),null,{default:a(()=>[s("div",Kt,[(r(!0),c(L,null,D(R.value,M=>(r(),c("div",{key:M.id,class:"flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},[s("div",null,[s("div",es,i(M.title),1),s("div",ts,i(M.description),1)]),t(e($),{size:"sm",onClick:oe=>v(M.action)},{default:a(()=>[u(i(M.buttonText),1)]),_:2},1032,["onClick"])]))),128))])]),_:1})]),_:1})):y("",!0),s("div",ss,[t(e(Z),null,{default:a(()=>[t(e(Pe),null,{default:a(()=>[t(e(Ve),{class:"text-lg"},{default:a(()=>w[9]||(w[9]=[u("Recent Products")])),_:1,__:[9]})]),_:1}),t(e(W),null,{default:a(()=>[Y.value.length>0?(r(),c("div",ls,[(r(!0),c(L,null,D(Y.value,M=>(r(),c("div",{key:M.id,class:"flex items-center gap-3 p-2 hover:bg-muted rounded-lg"},[w[11]||(w[11]=s("div",{class:"w-10 h-10 bg-gray-200 rounded flex-shrink-0"},null,-1)),s("div",as,[s("div",os,i(M.name),1),s("div",us,i(M.category),1)]),t(e(H),{variant:"secondary",class:"text-xs"},{default:a(()=>w[10]||(w[10]=[u("Active")])),_:1,__:[10]})]))),128))])):(r(),c("div",ns," No products added yet "))]),_:1})]),_:1}),t(e(Z),null,{default:a(()=>[t(e(Pe),null,{default:a(()=>[t(e(Ve),{class:"text-lg"},{default:a(()=>w[12]||(w[12]=[u("Your Businesses")])),_:1,__:[12]})]),_:1}),t(e(W),null,{default:a(()=>[P.value.length>0?(r(),c("div",rs,[(r(!0),c(L,null,D(P.value,M=>(r(),c("div",{key:M.id,class:"flex items-center justify-between p-2 hover:bg-muted rounded-lg"},[s("div",null,[s("div",ds,i(M.name),1),s("div",is,i(M.ssm),1)]),t(e(H),{variant:"outline",class:"text-xs"},{default:a(()=>[u(i(M.type),1)]),_:2},1024)]))),128))])):(r(),c("div",cs," No businesses registered yet "))]),_:1})]),_:1})]),t(e(Z),null,{default:a(()=>[t(e(Pe),null,{default:a(()=>[t(e(Ve),{class:"text-lg"},{default:a(()=>w[13]||(w[13]=[u("Quick Actions")])),_:1,__:[13]})]),_:1}),t(e(W),null,{default:a(()=>[s("div",ms,[t(e($),{variant:"outline",class:"h-auto p-4 flex flex-col gap-2",onClick:w[0]||(w[0]=M=>e(N).push("/user/businesses/add"))},{default:a(()=>[t(e(ze),{class:"h-5 w-5"}),w[14]||(w[14]=s("span",{class:"text-sm"},"Add Business",-1))]),_:1,__:[14]}),t(e($),{variant:"outline",class:"h-auto p-4 flex flex-col gap-2",onClick:w[1]||(w[1]=M=>e(N).push("/user/products"))},{default:a(()=>[t(e(Vt),{class:"h-5 w-5"}),w[15]||(w[15]=s("span",{class:"text-sm"},"Add Product",-1))]),_:1,__:[15]}),t(e($),{variant:"outline",class:"h-auto p-4 flex flex-col gap-2",onClick:w[2]||(w[2]=M=>e(N).push("/user/product-matching"))},{default:a(()=>[t(e(je),{class:"h-5 w-5"}),w[16]||(w[16]=s("span",{class:"text-sm"},"Find Products",-1))]),_:1,__:[16]}),t(e($),{variant:"outline",class:"h-auto p-4 flex flex-col gap-2",onClick:w[3]||(w[3]=M=>e(N).push("/profile"))},{default:a(()=>[t(e(At),{class:"h-5 w-5"}),w[17]||(w[17]=s("span",{class:"text-sm"},"Update Profile",-1))]),_:1,__:[17]})])]),_:1})]),_:1}),S.value?(r(),O(e(Z),{key:1},{default:a(()=>[t(e(Pe),null,{default:a(()=>[t(e(Ve),{class:"text-lg"},{default:a(()=>w[18]||(w[18]=[u("Complete Your Setup")])),_:1,__:[18]})]),_:1}),t(e(W),null,{default:a(()=>[s("div",vs,[s("div",fs,[p.value>0?(r(),O(e(st),{key:0,class:"h-4 w-4 text-green-500"})):(r(),c("div",ps)),s("span",{class:Q(p.value>0?"line-through text-muted-foreground":"")}," Register at least one business ",2)]),s("div",gs,[U.value>0?(r(),O(e(st),{key:0,class:"h-4 w-4 text-green-500"})):(r(),c("div",_s)),s("span",{class:Q(U.value>0?"line-through text-muted-foreground":"")}," Add your first product or service ",2)]),s("div",xs,[h.value?(r(),O(e(st),{key:0,class:"h-4 w-4 text-green-500"})):(r(),c("div",bs)),s("span",{class:Q(h.value?"line-through text-muted-foreground":"")}," Complete your profile information ",2)])])]),_:1})]),_:1})):y("",!0)]))}}),Bn=Object.freeze(Object.defineProperty({__proto__:null,default:ys},Symbol.toStringTag,{value:"Module"})),ws={class:"space-y-6"},ks={class:"flex items-center justify-between"},hs={class:"space-y-4"},$s={class:"relative"},Cs={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ss={class:"flex items-end"},Vs={class:"flex items-center justify-between mb-4"},Ps={class:"text-xl font-semibold"},Rs={class:"text-base font-normal text-muted-foreground ml-2"},Bs={class:"flex items-center gap-2"},Ns={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},Ts={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},Fs={class:"p-4 border-b bg-muted/30"},As={class:"flex items-start justify-between mb-2"},Us={class:"flex-1"},Is={class:"font-semibold text-lg line-clamp-1 mb-1"},js={class:"text-sm text-muted-foreground"},Os={class:"flex gap-2"},Ms={class:"p-4 space-y-3"},Es={class:"space-y-2 text-sm"},Ls={class:"flex items-start gap-2"},Ds={class:"text-muted-foreground line-clamp-2"},qs={class:"flex items-center gap-2"},zs={class:"text-muted-foreground"},Ys={class:"flex items-center gap-2"},Hs={class:"text-muted-foreground"},Gs={key:0,class:"flex items-center gap-2"},Xs={class:"text-muted-foreground"},Qs={key:1,class:"flex items-center gap-2"},Ws=["href"],Zs={class:"flex justify-between pt-2 gap-2"},Js={class:"flex gap-1"},Ks={key:2,class:"text-center py-12"},el={class:"mx-auto w-24 h-24 bg-muted rounded-full flex items-center justify-center mb-4"},tl={class:"text-lg font-semibold mb-2"},sl={class:"text-muted-foreground mb-4"},ll={class:"flex justify-center gap-2"},al={key:3,class:"flex items-center justify-between"},ol={class:"text-sm text-muted-foreground"},ul={class:"flex items-center gap-1"},nl={class:"flex-1 overflow-y-auto px-6 py-4"},rl={key:0,class:"grid gap-6"},dl={class:"flex items-start justify-between mb-3"},il={class:"text-2xl font-bold"},cl={class:"flex gap-2"},ml={class:"flex items-center gap-3 mb-4"},vl={class:"text-sm text-muted-foreground"},fl={class:"space-y-3"},pl={class:"flex items-start gap-3"},gl={class:"text-sm text-muted-foreground"},_l={class:"flex items-center gap-3"},xl={class:"text-sm text-muted-foreground"},bl={key:0,class:"flex items-center gap-3"},yl=["href"],wl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},kl={class:"space-y-2"},hl={class:"flex justify-between"},$l={class:"text-sm"},Cl={class:"flex justify-between"},Sl={class:"text-sm"},Vl={class:"space-y-2"},Pl={class:"flex justify-between"},Rl={class:"text-sm"},Bl={class:"flex justify-between"},Nl={key:0,class:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"},Tl=Me({__name:"index",setup(se){const N=et(),V=b(!1),A=b(!1),E=b([]),p=b([]),U=b([]),j=b([]),C=b(!1),h=b(!1),Y=b(null),P=b(null),R=b(""),S=b(1),g=b(9),v=b("newest"),f=b({type:"all",sector:"all",mofRegistration:"all"}),w=E,M=p,oe=I(()=>{let k=[...j.value];if(R.value.trim()){const d=R.value.toLowerCase();k=k.filter(_=>_.name.toLowerCase().includes(d)||_.ssm.toLowerCase().includes(d)||_.address.toLowerCase().includes(d)||_.phone.toLowerCase().includes(d))}if(f.value.type!=="all"&&(k=k.filter(d=>d.type===f.value.type)),f.value.sector!=="all"&&(k=k.filter(d=>d.sector===f.value.sector)),f.value.mofRegistration!=="all"){const d=f.value.mofRegistration==="true";k=k.filter(_=>_.mofRegistration===d)}switch(v.value){case"newest":k.sort((d,_)=>new Date(_.createdAt||0).getTime()-new Date(d.createdAt||0).getTime());break;case"oldest":k.sort((d,_)=>new Date(d.createdAt||0).getTime()-new Date(_.createdAt||0).getTime());break;case"name":k.sort((d,_)=>d.name.localeCompare(_.name));break;case"type":k.sort((d,_)=>d.type.localeCompare(_.type));break;case"sector":k.sort((d,_)=>d.sector.localeCompare(_.sector));break}return k}),q=I(()=>oe.value.length),m=I(()=>Math.ceil(q.value/g.value)),T=I(()=>(S.value-1)*g.value),_e=I(()=>T.value+g.value),de=I(()=>oe.value.slice(T.value,_e.value)),he=I(()=>{const k=[],d=Math.max(1,S.value-2),_=Math.min(m.value,S.value+2);for(let re=d;re<=_;re++)k.push(re);return k}),ce=I(()=>R.value.trim()!==""||f.value.type!=="all"||f.value.sector!=="all"||f.value.mofRegistration!=="all"),xe=k=>{var d;return((d=E.value.find(_=>_.value===k))==null?void 0:d.title)||k},me=k=>{var d;return((d=p.value.find(_=>_.value===k))==null?void 0:d.title)||k},be=k=>{var d;return((d=U.value.find(_=>_.value===k))==null?void 0:d.title)||k},ue=()=>{S.value=1},ne=()=>{R.value="",f.value={type:"all",sector:"all",mofRegistration:"all"},v.value="newest",S.value=1},ae=k=>{P.value=k,h.value=!0},ve=k=>{k>=1&&k<=m.value&&(S.value=k)},ye=()=>{N.push("/user/businesses/add")},we=k=>{N.push(`/user/businesses/${k}`)},$e=k=>{Y.value=k,C.value=!0},Re=async()=>{var k;try{const d=await X().delete(`/businesses/${(k=Y.value)==null?void 0:k.id}`,!0);console.log("response.data: ",d.data),C.value=!1,Y.value=null,G.success("Business deleted successfully"),ie()}catch(d){G.error("Failed to delete business"),console.error("Failed to delete business:",d)}};async function Ce(){try{const k=await X().get("/lookup?lookup_group=business_type");console.log("response.data: ",k.data.lookup_data),E.value=k.data.lookup_data;const d=await X().get("/lookup?lookup_group=business_sector");console.log("response.data: ",d.data.lookup_data),p.value=d.data.lookup_data;const _=await X().get("/lookup?lookup_group=business_category");console.log("response.data: ",_.data.lookup_data),U.value=_.data.lookup_data}catch(k){console.error("Fetch lookup error:",k)}}async function ie(){try{V.value=!0;const k=await X().get("/businesses",!0);console.log("response.data: ",k.data),j.value=k.data.businesses}catch(k){console.error("Fetch businesses error:",k)}finally{V.value=!1}}return Ee(async()=>{try{await Ce(),await ie()}catch(k){console.error("Error loading page data:",k)}}),(k,d)=>(r(),c("div",ws,[s("div",ks,[d[13]||(d[13]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"My Businesses"),s("p",{class:"text-muted-foreground mt-1"}," Manage your business registrations and information ")],-1)),t(e($),{onClick:ye,disabled:A.value,class:"flex items-center gap-2"},{default:a(()=>[t(e(We),{class:"h-4 w-4"}),d[12]||(d[12]=u(" Business Form "))]),_:1,__:[12]},8,["disabled"])]),t(e(Z),null,{default:a(()=>[t(e(W),{class:"p-6"},{default:a(()=>[s("div",hs,[s("div",$s,[t(e(je),{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),t(e(le),{modelValue:R.value,"onUpdate:modelValue":d[0]||(d[0]=_=>R.value=_),placeholder:"Search your businesses...",class:"pl-9 w-full",onInput:ue},null,8,["modelValue"])]),s("div",Cs,[s("div",null,[t(e(F),{for:"businessType"},{default:a(()=>d[14]||(d[14]=[u("Business Type")])),_:1,__:[14]}),t(e(J),{modelValue:f.value.type,"onUpdate:modelValue":[d[1]||(d[1]=_=>f.value.type=_),ue]},{default:a(()=>[t(e(K),{id:"businessType",class:"w-full mt-1"},{default:a(()=>[t(e(ee),{placeholder:"All types"})]),_:1}),t(e(te),null,{default:a(()=>[t(e(B),{value:"all"},{default:a(()=>d[15]||(d[15]=[u("All types")])),_:1,__:[15]}),(r(!0),c(L,null,D(e(w),_=>(r(),O(e(B),{key:_.value,value:_.value},{default:a(()=>[u(i(_.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),s("div",null,[t(e(F),{for:"businessSector"},{default:a(()=>d[16]||(d[16]=[u("Sector")])),_:1,__:[16]}),t(e(J),{modelValue:f.value.sector,"onUpdate:modelValue":[d[2]||(d[2]=_=>f.value.sector=_),ue]},{default:a(()=>[t(e(K),{id:"businessSector",class:"w-full mt-1"},{default:a(()=>[t(e(ee),{placeholder:"All sectors"})]),_:1}),t(e(te),null,{default:a(()=>[t(e(B),{value:"all"},{default:a(()=>d[17]||(d[17]=[u("All sectors")])),_:1,__:[17]}),(r(!0),c(L,null,D(e(M),_=>(r(),O(e(B),{key:_.value,value:_.value},{default:a(()=>[u(i(_.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),s("div",null,[t(e(F),{for:"mofRegistration"},{default:a(()=>d[18]||(d[18]=[u("MOF Registration")])),_:1,__:[18]}),t(e(J),{modelValue:f.value.mofRegistration,"onUpdate:modelValue":[d[3]||(d[3]=_=>f.value.mofRegistration=_),ue]},{default:a(()=>[t(e(K),{id:"mofRegistration",class:"w-full mt-1"},{default:a(()=>[t(e(ee),{placeholder:"All businesses"})]),_:1}),t(e(te),null,{default:a(()=>[t(e(B),{value:"all"},{default:a(()=>d[19]||(d[19]=[u("All businesses")])),_:1,__:[19]}),t(e(B),{value:"true"},{default:a(()=>d[20]||(d[20]=[u("MOF Registered")])),_:1,__:[20]}),t(e(B),{value:"false"},{default:a(()=>d[21]||(d[21]=[u("Not MOF Registered")])),_:1,__:[21]})]),_:1})]),_:1},8,["modelValue"])]),s("div",Ss,[t(e($),{variant:"outline",class:"w-full flex items-center gap-2",onClick:ne},{default:a(()=>[t(e(Oe),{class:"h-4 w-4"}),d[22]||(d[22]=u(" Reset "))]),_:1,__:[22]})])])])]),_:1})]),_:1}),s("div",null,[s("div",Vs,[s("h2",Ps,[d[23]||(d[23]=u(" Your Businesses ")),s("span",Rs," ("+i(q.value)+" businesses) ",1)]),s("div",Bs,[d[29]||(d[29]=s("p",{class:"text-sm text-muted-foreground"},"Sort by:",-1)),t(e(J),{modelValue:v.value,"onUpdate:modelValue":[d[4]||(d[4]=_=>v.value=_),ue]},{default:a(()=>[t(e(K),{class:"w-[180px] h-8"},{default:a(()=>[t(e(ee))]),_:1}),t(e(te),null,{default:a(()=>[t(e(B),{value:"newest"},{default:a(()=>d[24]||(d[24]=[u("Newest")])),_:1,__:[24]}),t(e(B),{value:"oldest"},{default:a(()=>d[25]||(d[25]=[u("Oldest")])),_:1,__:[25]}),t(e(B),{value:"name"},{default:a(()=>d[26]||(d[26]=[u("Name A-Z")])),_:1,__:[26]}),t(e(B),{value:"type"},{default:a(()=>d[27]||(d[27]=[u("Business Type")])),_:1,__:[27]}),t(e(B),{value:"sector"},{default:a(()=>d[28]||(d[28]=[u("Sector")])),_:1,__:[28]})]),_:1})]),_:1},8,["modelValue"])])]),V.value?(r(),c("div",Ns,[(r(),c(L,null,D(6,_=>t(e(Z),{key:_,class:"animate-pulse overflow-hidden"},{default:a(()=>[t(e(W),{class:"p-0"},{default:a(()=>d[30]||(d[30]=[s("div",{class:"p-4 border-b bg-muted/30"},[s("div",{class:"flex items-start justify-between mb-2"},[s("div",{class:"flex-1"},[s("div",{class:"h-6 bg-muted rounded w-3/4 mb-2"}),s("div",{class:"h-4 bg-muted rounded w-1/2"})]),s("div",{class:"h-6 bg-muted rounded w-12 ml-2"})]),s("div",{class:"flex gap-2 mt-3"},[s("div",{class:"h-5 bg-muted rounded w-16"}),s("div",{class:"h-5 bg-muted rounded w-20"})])],-1),s("div",{class:"p-4 space-y-3"},[s("div",{class:"space-y-2"},[s("div",{class:"flex items-start gap-2"},[s("div",{class:"h-4 w-4 bg-muted rounded mt-0.5 flex-shrink-0"}),s("div",{class:"h-4 bg-muted rounded w-full"})]),s("div",{class:"flex items-center gap-2"},[s("div",{class:"h-4 w-4 bg-muted rounded flex-shrink-0"}),s("div",{class:"h-4 bg-muted rounded w-2/3"})]),s("div",{class:"flex items-center gap-2"},[s("div",{class:"h-4 w-4 bg-muted rounded flex-shrink-0"}),s("div",{class:"h-4 bg-muted rounded w-1/2"})]),s("div",{class:"flex items-center gap-2"},[s("div",{class:"h-4 w-4 bg-muted rounded flex-shrink-0"}),s("div",{class:"h-4 bg-muted rounded w-3/4"})])]),s("div",{class:"flex justify-between pt-2 gap-2"},[s("div",{class:"flex gap-1 flex-1"},[s("div",{class:"h-8 bg-muted rounded flex-1"}),s("div",{class:"h-8 bg-muted rounded flex-1"})]),s("div",{class:"h-8 w-8 bg-muted rounded"})])],-1)])),_:1,__:[30]})]),_:2},1024)),64))])):de.value.length>0?(r(),c("div",Ts,[(r(!0),c(L,null,D(de.value,_=>(r(),O(e(Z),{key:_.id,class:"hover:shadow-md transition-shadow overflow-hidden"},{default:a(()=>[t(e(W),{class:"p-0"},{default:a(()=>[s("div",Fs,[s("div",As,[s("div",Us,[s("h3",Is,i(_.name),1),s("p",js," SSM: "+i(_.ssm),1)]),t(e(H),{variant:_.mofRegistration?"default":"secondary",class:"text-xs ml-2"},{default:a(()=>[u(i(_.mofRegistration?"MOF":"No MOF"),1)]),_:2},1032,["variant"])]),s("div",Os,[t(e(H),{variant:"outline",class:"text-xs"},{default:a(()=>[u(i(xe(_.type)),1)]),_:2},1024),t(e(H),{variant:"outline",class:"text-xs"},{default:a(()=>[u(i(me(_.sector)),1)]),_:2},1024)])]),s("div",Ms,[s("div",Es,[s("div",Ls,[t(e(Ze),{class:"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0"}),s("span",Ds,i(_.address),1)]),s("div",qs,[t(e(lt),{class:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s("span",zs,i(_.phone),1)]),s("div",Ys,[t(e(pe),{class:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s("span",Hs,i(be(_.category)),1)]),_.mofRegistration&&_.mofRegistrationNumber?(r(),c("div",Gs,[t(e(at),{class:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s("span",Xs," MOF: "+i(_.mofRegistrationNumber),1)])):y("",!0),_.url?(r(),c("div",Qs,[t(e(Je),{class:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",class:"text-primary hover:underline text-sm truncate"},i(_.url),9,Ws)])):y("",!0)]),s("div",Zs,[s("div",Js,[t(e($),{variant:"outline",size:"sm",class:"flex items-center gap-1 flex-1",onClick:re=>ae(_)},{default:a(()=>[t(e(dt),{class:"h-3 w-3"}),d[31]||(d[31]=u(" View "))]),_:2,__:[31]},1032,["onClick"]),t(e($),{variant:"outline",size:"sm",class:"flex items-center gap-1 flex-1",onClick:re=>we(_.id),disabled:A.value},{default:a(()=>[t(e(Ke),{class:"h-3 w-3"}),d[32]||(d[32]=u(" Edit "))]),_:2,__:[32]},1032,["onClick","disabled"])]),t(e($),{variant:"destructive",size:"sm",class:"flex items-center gap-1",onClick:re=>$e(_),disabled:A.value},{default:a(()=>[t(e(it),{class:"h-3 w-3"})]),_:2},1032,["onClick","disabled"])])])]),_:2},1024)]),_:2},1024))),128))])):(r(),c("div",Ks,[s("div",el,[t(e(ze),{class:"h-8 w-8 text-muted-foreground"})]),s("h3",tl,i(ce.value?"No businesses found":"No businesses yet"),1),s("p",sl,i(ce.value?"Try adjusting your search criteria or reset filters":`You haven't registered any businesses yet. Click "Add Business" to get started.`),1),s("div",ll,[ce.value?(r(),O(e($),{key:0,variant:"outline",onClick:ne,class:"flex items-center gap-2"},{default:a(()=>[t(e(Oe),{class:"h-4 w-4"}),d[33]||(d[33]=u(" Reset Filters "))]),_:1,__:[33]})):y("",!0),t(e($),{onClick:ye,disabled:A.value,class:"flex items-center gap-2"},{default:a(()=>[t(e(We),{class:"h-4 w-4"}),d[34]||(d[34]=u(" Business Form "))]),_:1,__:[34]},8,["disabled"])])])),de.value.length>0&&m.value>1?(r(),c("div",al,[s("p",ol," Showing "+i(T.value+1)+"-"+i(Math.min(_e.value,q.value))+" of "+i(q.value)+" businesses ",1),s("div",ul,[t(e($),{variant:"outline",size:"icon",disabled:S.value===1,onClick:d[5]||(d[5]=_=>ve(S.value-1))},{default:a(()=>[t(e(nt),{class:"h-4 w-4"})]),_:1},8,["disabled"]),(r(!0),c(L,null,D(he.value,_=>(r(),O(e($),{key:_,variant:_===S.value?"default":"outline",size:"sm",class:"h-8 w-8",onClick:re=>ve(_)},{default:a(()=>[u(i(_),1)]),_:2},1032,["variant","onClick"]))),128)),t(e($),{variant:"outline",size:"icon",disabled:S.value===m.value,onClick:d[6]||(d[6]=_=>ve(S.value+1))},{default:a(()=>[t(e(rt),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):y("",!0)]),t(e(Ie),{open:h.value,"onUpdate:open":d[9]||(d[9]=_=>h.value=_)},{default:a(()=>[t(e(Ne),{class:"sm:max-w-[800px] max-h-[90vh] flex flex-col p-0"},{default:a(()=>[t(e(Te),{class:"px-6 py-4 border-b"},{default:a(()=>[t(e(Fe),null,{default:a(()=>d[35]||(d[35]=[u("Business Details")])),_:1,__:[35]}),t(e(Ae),null,{default:a(()=>d[36]||(d[36]=[u(" Detailed information about your business ")])),_:1,__:[36]})]),_:1}),s("div",nl,[P.value?(r(),c("div",rl,[s("div",null,[s("div",dl,[s("h2",il,i(P.value.name),1),s("div",cl,[t(e(H),{variant:P.value.mofRegistration?"default":"secondary"},{default:a(()=>[u(i(P.value.mofRegistration?"MOF Registered":"Not MOF Registered"),1)]),_:1},8,["variant"])])]),s("div",ml,[t(e(H),{variant:"outline"},{default:a(()=>[u(i(xe(P.value.type)),1)]),_:1}),t(e(H),{variant:"outline"},{default:a(()=>[u(i(me(P.value.sector)),1)]),_:1}),t(e(H),{variant:"outline"},{default:a(()=>[u(i(be(P.value.category)),1)]),_:1})]),s("p",vl," SSM Registration: "+i(P.value.ssm),1)]),t(e(ge)),s("div",null,[d[40]||(d[40]=s("h3",{class:"font-semibold mb-3"},"Contact Information",-1)),s("div",fl,[s("div",pl,[t(e(Ze),{class:"h-5 w-5 text-muted-foreground mt-0.5"}),s("div",null,[d[37]||(d[37]=s("p",{class:"font-medium"},"Address",-1)),s("p",gl,i(P.value.address),1)])]),s("div",_l,[t(e(lt),{class:"h-5 w-5 text-muted-foreground"}),s("div",null,[d[38]||(d[38]=s("p",{class:"font-medium"},"Phone",-1)),s("p",xl,i(P.value.phone),1)])]),P.value.url?(r(),c("div",bl,[t(e(Je),{class:"h-5 w-5 text-muted-foreground"}),s("div",null,[d[39]||(d[39]=s("p",{class:"font-medium"},"Website",-1)),s("a",{href:P.value.url,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-primary hover:underline"},i(P.value.url),9,yl)])])):y("",!0)])]),t(e(ge)),s("div",null,[d[45]||(d[45]=s("h3",{class:"font-semibold mb-3"},"Business Classification",-1)),s("div",wl,[s("div",kl,[s("div",hl,[d[41]||(d[41]=s("span",{class:"text-sm text-muted-foreground"},"Business Type:",-1)),s("span",$l,i(xe(P.value.type)),1)]),s("div",Cl,[d[42]||(d[42]=s("span",{class:"text-sm text-muted-foreground"},"Sector:",-1)),s("span",Sl,i(me(P.value.sector)),1)])]),s("div",Vl,[s("div",Pl,[d[43]||(d[43]=s("span",{class:"text-sm text-muted-foreground"},"Category:",-1)),s("span",Rl,i(be(P.value.category)),1)]),s("div",Bl,[d[44]||(d[44]=s("span",{class:"text-sm text-muted-foreground"},"MOF Registration:",-1)),t(e(H),{variant:P.value.mofRegistration?"default":"secondary",class:"text-xs"},{default:a(()=>[u(i(P.value.mofRegistration?"Yes":"No"),1)]),_:1},8,["variant"])])])])])])):y("",!0)]),t(e(Ue),{class:"px-6 py-4 border-t gap-2"},{default:a(()=>[t(e($),{variant:"outline",onClick:d[7]||(d[7]=_=>h.value=!1)},{default:a(()=>d[46]||(d[46]=[u(" Close ")])),_:1,__:[46]}),t(e($),{class:"flex items-center gap-2",onClick:d[8]||(d[8]=_=>we(P.value.id)),disabled:A.value},{default:a(()=>[t(e(Ke),{class:"h-4 w-4"}),d[47]||(d[47]=u(" Edit Business "))]),_:1,__:[47]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),t(e(Ie),{open:C.value,"onUpdate:open":d[11]||(d[11]=_=>C.value=_)},{default:a(()=>[t(e(Ne),{class:"sm:max-w-[400px]"},{default:a(()=>[t(e(Te),null,{default:a(()=>[t(e(Fe),null,{default:a(()=>d[48]||(d[48]=[u("Delete Business")])),_:1,__:[48]}),t(e(Ae),null,{default:a(()=>{var _;return[d[49]||(d[49]=u(" Are you sure you want to delete the business ")),s("strong",null,'"'+i((_=Y.value)==null?void 0:_.name)+'"',1),d[50]||(d[50]=u("? ")),d[51]||(d[51]=s("br",null,null,-1)),d[52]||(d[52]=s("br",null,null,-1)),d[53]||(d[53]=u(" This action cannot be undone. "))]}),_:1,__:[49,50,51,52,53]})]),_:1}),t(e(Ue),{class:"gap-2"},{default:a(()=>[t(e($),{variant:"outline",onClick:d[10]||(d[10]=_=>C.value=!1),disabled:A.value},{default:a(()=>d[54]||(d[54]=[u(" Cancel ")])),_:1,__:[54]},8,["disabled"]),t(e($),{variant:"destructive",onClick:Re,disabled:A.value,class:"flex items-center gap-2"},{default:a(()=>[A.value?(r(),c("div",Nl)):y("",!0),u(" "+i(A.value?"Deleting...":"Delete Business"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]))}}),Nn=Object.freeze(Object.defineProperty({__proto__:null,default:Tl},Symbol.toStringTag,{value:"Module"}));function Fl(){return{show:(j,C)=>{G(j,C)},success:(j,C)=>{G.success(j,C)},error:(j,C)=>{G.error(j,C)},warning:(j,C)=>{G.warning(j,C)},info:(j,C)=>{G.info(j,C)},promise:(j,C)=>G.promise(j,C),dismiss:j=>{G.dismiss(j)}}}const Xe=(se=800)=>new Promise(N=>setTimeout(N,se));function Rt(){const se=b([]),N=b(!1),V=b(!1),A=b(void 0),E=Fl(),p=I(()=>se.value.length>0),U=I(()=>se.value.length),j=g=>{var f;const v={};return g.name.trim()||(v.name="Company name is required"),g.ssm.trim()?/^\d{12}$/.test(g.ssm.replace(/[-\s]/g,""))||(v.ssm="Invalid SSM number format (12 digits required)"):v.ssm="SSM number is required",g.address.trim()||(v.address="Business address is required"),g.phone.trim()?/^(\+?60|0)[0-9-\s]{8,12}$/.test(g.phone.replace(/[-\s]/g,""))||(v.phone="Invalid phone number format"):v.phone="Phone number is required",g.type||(v.type="Business type is required"),g.sector||(v.sector="Business sector is required"),g.category||(v.category="Business category is required"),g.mofRegistration&&!((f=g.mofRegistrationNumber)!=null&&f.trim())&&(v.mofRegistrationNumber="MOF Registration Number is required when MOF Registration is selected"),g.url&&g.url.trim()&&(/^https?:\/\/.+\..+/.test(g.url)||(v.url="Invalid URL format")),v};return{businesses:se,isLoading:N,isSubmitting:V,error:A,hasBusinesses:p,businessesCount:U,fetchBusinesses:async()=>{try{N.value=!0,A.value=void 0,await Xe(),se.value=[]}catch(g){const v=g.message||"Ralat semasa mengambil data perniagaan";A.value=v,E.error("Ralat",{description:v})}finally{N.value=!1}},createBusiness:async g=>{var v,f;try{V.value=!0,A.value=void 0;const w=j(g);if(Object.keys(w).length>0){const oe=Object.values(w)[0];return E.error("Ralat Validasi",{description:oe}),!1}await Xe(1200);const M={id:Date.now().toString(),name:g.name.trim(),ssm:g.ssm.trim(),address:g.address.trim(),phone:g.phone.trim(),type:g.type,sector:g.sector,category:g.category,mofRegistration:g.mofRegistration,mofRegistrationNumber:((v=g.mofRegistrationNumber)==null?void 0:v.trim())||"",...(f=g.url)!=null&&f.trim()?{url:g.url.trim()}:{},createdAt:new Date};return se.value.push(M),E.success("Berjaya",{description:"Perniagaan baru telah didaftarkan"}),!0}catch(w){const M=w.message||"Ralat semasa mendaftarkan perniagaan";return A.value=M,E.error("Ralat",{description:M}),!1}finally{V.value=!1}},updateBusiness:async(g,v)=>{try{V.value=!0,A.value=void 0,await Xe(1e3);const f=se.value.findIndex(w=>w.id===g);if(f!==-1){const w={...se.value[f],...Object.fromEntries(Object.entries(v).filter(([M,oe])=>oe!==void 0)),updatedAt:new Date};se.value[f]=w}return E.success("Berjaya",{description:"Maklumat perniagaan telah dikemaskini"}),!0}catch(f){return A.value=f.message||"Ralat semasa mengemaskini perniagaan",E.error("Ralat",{description:A.value||"Ralat semasa mengemaskini perniagaan"}),!1}finally{V.value=!1}},deleteBusiness:async g=>{try{return V.value=!0,A.value=void 0,await Xe(600),se.value=se.value.filter(v=>v.id!==g),E.success("Berjaya",{description:"Perniagaan telah dipadam"}),!0}catch(v){return A.value=v.message||"Ralat semasa memadam perniagaan",E.error("Ralat",{description:A.value||"Ralat semasa memadam perniagaan"}),!1}finally{V.value=!1}},validateBusinessForm:j,createEmptyFormData:()=>({name:"",ssm:"",address:"",phone:"",type:"",sector:"",category:"",mofRegistration:!1,mofRegistrationNumber:"",url:""}),businessToFormData:g=>({name:g.name,ssm:g.ssm,address:g.address,phone:g.phone,type:g.type,sector:g.sector,category:g.category,mofRegistration:g.mofRegistration,mofRegistrationNumber:g.mofRegistrationNumber||"",url:g.url||""})}}const Al={class:"space-y-6"},Ul={class:"flex items-center justify-between"},Il={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},jl={class:"md:col-span-2"},Ol={key:0,class:"text-red-500 text-xs mt-1"},Ml={key:0,class:"text-red-500 text-xs mt-1"},El={key:0,class:"text-red-500 text-xs mt-1"},Ll={class:"md:col-span-2"},Dl={key:0,class:"text-red-500 text-xs mt-1"},ql={key:0,class:"text-red-500 text-xs mt-1"},zl={key:0,class:"text-red-500 text-xs mt-1"},Yl={key:0,class:"text-red-500 text-xs mt-1"},Hl={class:"flex items-center space-x-2"},Gl={class:"flex items-center space-x-2"},Xl={key:0},Ql={key:0,class:"text-red-500 text-xs mt-1"},Wl={class:"md:col-span-2"},Zl={key:0,class:"text-red-500 text-xs mt-1"},Jl={class:"flex items-center justify-end gap-4 pt-6 border-t"},Kl={key:0,class:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"},ea=Me({__name:"index",setup(se){const N=et(),{isSubmitting:V,validateBusinessForm:A,createEmptyFormData:E}=Rt(),p=b([]),U=b([]),j=b([]),C=b(E()),h=b({}),Y=()=>{N.push("/user/businesses")},P=async()=>{if(h.value=A(C.value),Object.keys(h.value).length>0){const g=Object.keys(h.value)[0],v=document.getElementById(R(g));v&&(v.scrollIntoView({behavior:"smooth",block:"center"}),v.focus());return}V.value=!0;try{const g=await X().post("/businesses",C.value,!0);setTimeout(()=>{G.success(g.message),N.push("/user/businesses")},1e3)}catch(g){console.error("Create business error:",g.data.message),G.error(g.data.message),V.value=!1}},R=g=>({name:"companyName",ssm:"ssmNumber",address:"businessAddress",phone:"officePhone",type:"businessType",sector:"businessSector",category:"businessCategory",mofRegistrationNumber:"mofRegistrationNumber",url:"businessUrl"})[g]||g;async function S(){try{const g=await X().get("/lookup?lookup_group=business_type");console.log("response.data: ",g.data.lookup_data),p.value=g.data.lookup_data;const v=await X().get("/lookup?lookup_group=business_sector");console.log("response.data: ",v.data.lookup_data),U.value=v.data.lookup_data;const f=await X().get("/lookup?lookup_group=business_category");console.log("response.data: ",f.data.lookup_data),j.value=f.data.lookup_data}catch(g){console.error("Fetch lookup error:",g)}}return Ee(async()=>{await S()}),(g,v)=>(r(),c("div",Al,[s("div",Ul,[v[11]||(v[11]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Add New Business"),s("p",{class:"text-muted-foreground mt-1"}," Register your business information ")],-1)),t(e($),{variant:"outline",onClick:Y,class:"flex items-center gap-2"},{default:a(()=>[t(e(Pt),{class:"h-4 w-4"}),v[10]||(v[10]=u(" Back to Businesses "))]),_:1,__:[10]})]),t(e(Z),null,{default:a(()=>[t(e(Pe),null,{default:a(()=>[t(e(Ve),null,{default:a(()=>v[12]||(v[12]=[u("Business Information")])),_:1,__:[12]}),t(e(Ct),null,{default:a(()=>v[13]||(v[13]=[u(" Please fill in all the required information to register your business. ")])),_:1,__:[13]})]),_:1}),t(e(W),null,{default:a(()=>[s("form",{onSubmit:ct(P,["prevent"]),class:"space-y-6"},[s("div",Il,[s("div",jl,[t(e(F),{for:"companyName",class:"text-sm font-medium"},{default:a(()=>v[14]||(v[14]=[u(" Company Name "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[14]}),t(e(le),{id:"companyName",modelValue:C.value.name,"onUpdate:modelValue":v[0]||(v[0]=f=>C.value.name=f),placeholder:"Your company name",class:Q([{"border-red-500":h.value.name},"mt-1"]),required:""},null,8,["modelValue","class"]),h.value.name?(r(),c("p",Ol,i(h.value.name),1)):y("",!0)]),s("div",null,[t(e(F),{for:"ssmNumber",class:"text-sm font-medium"},{default:a(()=>v[15]||(v[15]=[u(" SSM Number "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[15]}),t(e(le),{id:"ssmNumber",modelValue:C.value.ssm,"onUpdate:modelValue":v[1]||(v[1]=f=>C.value.ssm=f),placeholder:"SSM registration number (12 digits)",class:Q([{"border-red-500":h.value.ssm},"mt-1"]),maxlength:"12",required:""},null,8,["modelValue","class"]),h.value.ssm?(r(),c("p",Ml,i(h.value.ssm),1)):y("",!0)]),s("div",null,[t(e(F),{for:"officePhone",class:"text-sm font-medium"},{default:a(()=>v[16]||(v[16]=[u(" Office Phone "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[16]}),t(e(le),{id:"officePhone",modelValue:C.value.phone,"onUpdate:modelValue":v[2]||(v[2]=f=>C.value.phone=f),placeholder:"Office phone number (e.g., 03-1234-5678)",class:Q([{"border-red-500":h.value.phone},"mt-1"]),required:""},null,8,["modelValue","class"]),h.value.phone?(r(),c("p",El,i(h.value.phone),1)):y("",!0)]),s("div",Ll,[t(e(F),{for:"businessAddress",class:"text-sm font-medium"},{default:a(()=>v[17]||(v[17]=[u(" Business Address "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[17]}),t(e(ut),{id:"businessAddress",modelValue:C.value.address,"onUpdate:modelValue":v[3]||(v[3]=f=>C.value.address=f),placeholder:"Your business address",class:Q([{"border-red-500":h.value.address},"mt-1"]),rows:"3",required:""},null,8,["modelValue","class"]),h.value.address?(r(),c("p",Dl,i(h.value.address),1)):y("",!0)]),s("div",null,[t(e(F),{for:"businessType",class:"text-sm font-medium"},{default:a(()=>v[18]||(v[18]=[u(" Business Type "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[18]}),t(e(J),{modelValue:C.value.type,"onUpdate:modelValue":v[4]||(v[4]=f=>C.value.type=f),required:""},{default:a(()=>[t(e(K),{id:"businessType",class:Q([{"border-red-500":h.value.type},"w-full mt-1"])},{default:a(()=>[t(e(ee),{placeholder:"Select business type"})]),_:1},8,["class"]),t(e(te),null,{default:a(()=>[(r(!0),c(L,null,D(p.value,f=>(r(),O(e(B),{key:f.value,value:f.value},{default:a(()=>[u(i(f.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),h.value.type?(r(),c("p",ql,i(h.value.type),1)):y("",!0)]),s("div",null,[t(e(F),{for:"businessSector",class:"text-sm font-medium"},{default:a(()=>v[19]||(v[19]=[u(" Business Sector "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[19]}),t(e(J),{modelValue:C.value.sector,"onUpdate:modelValue":v[5]||(v[5]=f=>C.value.sector=f),required:""},{default:a(()=>[t(e(K),{id:"businessSector",class:Q([{"border-red-500":h.value.sector},"w-full mt-1"])},{default:a(()=>[t(e(ee),{placeholder:"Select business sector"})]),_:1},8,["class"]),t(e(te),null,{default:a(()=>[(r(!0),c(L,null,D(U.value,f=>(r(),O(e(B),{key:f.value,value:f.value},{default:a(()=>[u(i(f.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),h.value.sector?(r(),c("p",zl,i(h.value.sector),1)):y("",!0)]),s("div",null,[t(e(F),{for:"businessCategory",class:"text-sm font-medium"},{default:a(()=>v[20]||(v[20]=[u(" Business Category "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[20]}),t(e(J),{modelValue:C.value.category,"onUpdate:modelValue":v[6]||(v[6]=f=>C.value.category=f),required:""},{default:a(()=>[t(e(K),{id:"businessCategory",class:Q([{"border-red-500":h.value.category},"w-full mt-1"])},{default:a(()=>[t(e(ee),{placeholder:"Select business category"})]),_:1},8,["class"]),t(e(te),null,{default:a(()=>[(r(!0),c(L,null,D(j.value,f=>(r(),O(e(B),{key:f.value,value:f.value},{default:a(()=>[u(i(f.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),h.value.category?(r(),c("p",Yl,i(h.value.category),1)):y("",!0)]),s("div",null,[t(e(F),{class:"text-sm font-medium"},{default:a(()=>v[21]||(v[21]=[u("MOF Registration")])),_:1,__:[21]}),t(e(St),{"model-value":C.value.mofRegistration?"yes":"no","onUpdate:modelValue":v[7]||(v[7]=f=>C.value.mofRegistration=f==="yes"),class:"flex gap-4 mt-2"},{default:a(()=>[s("div",Hl,[t(e(Qe),{value:"yes",id:"mof-yes"}),t(e(F),{for:"mof-yes"},{default:a(()=>v[22]||(v[22]=[u("Yes")])),_:1,__:[22]})]),s("div",Gl,[t(e(Qe),{value:"no",id:"mof-no"}),t(e(F),{for:"mof-no"},{default:a(()=>v[23]||(v[23]=[u("No")])),_:1,__:[23]})])]),_:1},8,["model-value"])]),C.value.mofRegistration?(r(),c("div",Xl,[t(e(F),{for:"mofRegistrationNumber",class:"text-sm font-medium"},{default:a(()=>v[24]||(v[24]=[u(" MOF Registration Number "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[24]}),t(e(le),{id:"mofRegistrationNumber",modelValue:C.value.mofRegistrationNumber,"onUpdate:modelValue":v[8]||(v[8]=f=>C.value.mofRegistrationNumber=f),placeholder:"MOF registration number",class:Q([{"border-red-500":h.value.mofRegistrationNumber},"mt-1"]),required:""},null,8,["modelValue","class"]),h.value.mofRegistrationNumber?(r(),c("p",Ql,i(h.value.mofRegistrationNumber),1)):y("",!0)])):y("",!0),s("div",Wl,[t(e(F),{for:"businessUrl",class:"text-sm font-medium"},{default:a(()=>v[25]||(v[25]=[u(" Business Website (Optional) ")])),_:1,__:[25]}),t(e(le),{id:"businessUrl","model-value":C.value.url||"","onUpdate:modelValue":v[9]||(v[9]=f=>C.value.url=String(f)),placeholder:"https://example.com (if any)",class:Q([{"border-red-500":h.value.url},"mt-1"]),type:"url"},null,8,["model-value","class"]),h.value.url?(r(),c("p",Zl,i(h.value.url),1)):y("",!0)])]),s("div",Jl,[t(e($),{type:"button",variant:"outline",onClick:Y,disabled:e(V)},{default:a(()=>v[26]||(v[26]=[u(" Cancel ")])),_:1,__:[26]},8,["disabled"]),t(e($),{type:"submit",disabled:e(V),class:"flex items-center gap-2 min-w-[120px]"},{default:a(()=>[e(V)?(r(),c("div",Kl)):y("",!0),u(" "+i(e(V)?"Saving...":"Save Business"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})]))}}),Tn=Object.freeze(Object.defineProperty({__proto__:null,default:ea},Symbol.toStringTag,{value:"Module"})),ta={class:"space-y-6"},sa={key:0,class:"flex items-center justify-center py-12"},la={key:1,class:"text-center py-12"},aa={class:"bg-destructive/10 p-6 rounded-lg"},oa={class:"text-muted-foreground"},ua={class:"flex items-center justify-between"},na={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ra={class:"md:col-span-2"},da={key:0,class:"text-red-500 text-xs mt-1"},ia={key:0,class:"text-red-500 text-xs mt-1"},ca={key:0,class:"text-red-500 text-xs mt-1"},ma={class:"md:col-span-2"},va={key:0,class:"text-red-500 text-xs mt-1"},fa={key:0,class:"text-red-500 text-xs mt-1"},pa={key:0,class:"text-red-500 text-xs mt-1"},ga={key:0,class:"text-red-500 text-xs mt-1"},_a={class:"flex items-center space-x-2"},xa={class:"flex items-center space-x-2"},ba={key:0},ya={key:0,class:"text-red-500 text-xs mt-1"},wa={class:"md:col-span-2"},ka={key:0,class:"text-red-500 text-xs mt-1"},ha={class:"flex items-center justify-end gap-4 pt-6 border-t"},$a={key:0,class:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"},Ca=Me({__name:"index",setup(se){const N=et(),V=Ut(),A=b([]),E=b([]),p=b([]),{isSubmitting:U,validateBusinessForm:j,businessToFormData:C}=Rt(),h=b(!1),Y=b(null),P=b(null),R=b({name:"",ssm:"",address:"",phone:"",type:"",sector:"",category:"",mofRegistration:!1,mofRegistrationNumber:"",url:""}),S=b({}),g=V.params.id,v=()=>{N.push("/user/businesses")},f=async()=>{try{h.value=!0,Y.value=null;const q=await X().get(`/businesses/${g}`,!0);console.log("response.data: ",q.data.business),P.value=q.data.business,R.value=C(q.data.business)}catch(q){Y.value=q.message||"Failed to load business data"}finally{h.value=!1}},w=async()=>{if(U.value=!0,!!P.value){if(S.value=j(R.value),Object.keys(S.value).length>0){const q=Object.keys(S.value)[0],m=document.getElementById(M(q));m&&(m.scrollIntoView({behavior:"smooth",block:"center"}),m.focus()),U.value=!1;return}try{const q=await X().put(`/businesses/${g}`,R.value,!0);setTimeout(()=>{G.success(q.message),N.push("/user/businesses")},1e3)}catch(q){console.error("Update business error:",q.data.message),G.error(q.data.message||"Failed to update business"),U.value=!1}}},M=q=>({name:"companyName",ssm:"ssmNumber",address:"businessAddress",phone:"officePhone",type:"businessType",sector:"businessSector",category:"businessCategory",mofRegistrationNumber:"mofRegistrationNumber",url:"businessUrl"})[q]||q;async function oe(){try{const q=await X().get("/lookup?lookup_group=business_type");console.log("response.data: ",q.data.lookup_data),A.value=q.data.lookup_data;const m=await X().get("/lookup?lookup_group=business_sector");console.log("response.data: ",m.data.lookup_data),E.value=m.data.lookup_data;const T=await X().get("/lookup?lookup_group=business_category");console.log("response.data: ",T.data.lookup_data),p.value=T.data.lookup_data}catch(q){console.error("Fetch lookup error:",q)}}return Ee(async()=>{if(!g){N.push("/user/businesses");return}await oe(),await f()}),(q,m)=>(r(),c("div",ta,[h.value?(r(),c("div",sa,m[10]||(m[10]=[s("div",{class:"flex items-center gap-2"},[s("div",{class:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),s("span",{class:"text-muted-foreground"},"Loading business data...")],-1)]))):Y.value?(r(),c("div",la,[s("div",aa,[m[12]||(m[12]=s("h2",{class:"text-xl font-semibold text-destructive mb-2"},"Error",-1)),s("p",oa,i(Y.value),1),t(e($),{onClick:v,class:"mt-4"},{default:a(()=>m[11]||(m[11]=[u(" Back to Businesses ")])),_:1,__:[11]})])])):(r(),c(L,{key:2},[s("div",ua,[m[14]||(m[14]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Edit Business"),s("p",{class:"text-muted-foreground mt-1"}," Update your business information ")],-1)),t(e($),{variant:"outline",onClick:v,class:"flex items-center gap-2"},{default:a(()=>[t(e(Pt),{class:"h-4 w-4"}),m[13]||(m[13]=u(" Back to Businesses "))]),_:1,__:[13]})]),t(e(Z),null,{default:a(()=>[t(e(Pe),null,{default:a(()=>[t(e(Ve),null,{default:a(()=>m[15]||(m[15]=[u("Business Information")])),_:1,__:[15]}),t(e(Ct),null,{default:a(()=>m[16]||(m[16]=[u(" Update your business details below. All required fields must be filled. ")])),_:1,__:[16]})]),_:1}),t(e(W),null,{default:a(()=>[s("form",{onSubmit:ct(w,["prevent"]),class:"space-y-6"},[s("div",na,[s("div",ra,[t(e(F),{for:"companyName",class:"text-sm font-medium"},{default:a(()=>m[17]||(m[17]=[u(" Company Name "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[17]}),t(e(le),{id:"companyName",modelValue:R.value.name,"onUpdate:modelValue":m[0]||(m[0]=T=>R.value.name=T),placeholder:"Your company name",class:Q([{"border-red-500":S.value.name},"mt-1"]),required:""},null,8,["modelValue","class"]),S.value.name?(r(),c("p",da,i(S.value.name),1)):y("",!0)]),s("div",null,[t(e(F),{for:"ssmNumber",class:"text-sm font-medium"},{default:a(()=>m[18]||(m[18]=[u(" SSM Number "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[18]}),t(e(le),{id:"ssmNumber",modelValue:R.value.ssm,"onUpdate:modelValue":m[1]||(m[1]=T=>R.value.ssm=T),placeholder:"SSM registration number (12 digits)",class:Q([{"border-red-500":S.value.ssm},"mt-1"]),maxlength:"12",required:""},null,8,["modelValue","class"]),S.value.ssm?(r(),c("p",ia,i(S.value.ssm),1)):y("",!0)]),s("div",null,[t(e(F),{for:"officePhone",class:"text-sm font-medium"},{default:a(()=>m[19]||(m[19]=[u(" Office Phone "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[19]}),t(e(le),{id:"officePhone",modelValue:R.value.phone,"onUpdate:modelValue":m[2]||(m[2]=T=>R.value.phone=T),placeholder:"Office phone number (e.g., 03-1234-5678)",class:Q([{"border-red-500":S.value.phone},"mt-1"]),required:""},null,8,["modelValue","class"]),S.value.phone?(r(),c("p",ca,i(S.value.phone),1)):y("",!0)]),s("div",ma,[t(e(F),{for:"businessAddress",class:"text-sm font-medium"},{default:a(()=>m[20]||(m[20]=[u(" Business Address "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[20]}),t(e(ut),{id:"businessAddress",modelValue:R.value.address,"onUpdate:modelValue":m[3]||(m[3]=T=>R.value.address=T),placeholder:"Your business address",class:Q([{"border-red-500":S.value.address},"mt-1"]),rows:"3",required:""},null,8,["modelValue","class"]),S.value.address?(r(),c("p",va,i(S.value.address),1)):y("",!0)]),s("div",null,[t(e(F),{for:"businessType",class:"text-sm font-medium"},{default:a(()=>m[21]||(m[21]=[u(" Business Type "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[21]}),t(e(J),{modelValue:R.value.type,"onUpdate:modelValue":m[4]||(m[4]=T=>R.value.type=T),required:""},{default:a(()=>[t(e(K),{id:"businessType",class:Q([{"border-red-500":S.value.type},"w-full mt-1"])},{default:a(()=>[t(e(ee),{placeholder:"Select business type"})]),_:1},8,["class"]),t(e(te),null,{default:a(()=>[(r(!0),c(L,null,D(A.value,T=>(r(),O(e(B),{key:T.value,value:T.value},{default:a(()=>[u(i(T.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),S.value.type?(r(),c("p",fa,i(S.value.type),1)):y("",!0)]),s("div",null,[t(e(F),{for:"businessSector",class:"text-sm font-medium"},{default:a(()=>m[22]||(m[22]=[u(" Business Sector "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[22]}),t(e(J),{modelValue:R.value.sector,"onUpdate:modelValue":m[5]||(m[5]=T=>R.value.sector=T),required:""},{default:a(()=>[t(e(K),{id:"businessSector",class:Q([{"border-red-500":S.value.sector},"w-full mt-1"])},{default:a(()=>[t(e(ee),{placeholder:"Select business sector"})]),_:1},8,["class"]),t(e(te),null,{default:a(()=>[(r(!0),c(L,null,D(E.value,T=>(r(),O(e(B),{key:T.value,value:T.value},{default:a(()=>[u(i(T.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),S.value.sector?(r(),c("p",pa,i(S.value.sector),1)):y("",!0)]),s("div",null,[t(e(F),{for:"businessCategory",class:"text-sm font-medium"},{default:a(()=>m[23]||(m[23]=[u(" Business Category "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[23]}),t(e(J),{modelValue:R.value.category,"onUpdate:modelValue":m[6]||(m[6]=T=>R.value.category=T),required:""},{default:a(()=>[t(e(K),{id:"businessCategory",class:Q([{"border-red-500":S.value.category},"w-full mt-1"])},{default:a(()=>[t(e(ee),{placeholder:"Select business category"})]),_:1},8,["class"]),t(e(te),null,{default:a(()=>[(r(!0),c(L,null,D(p.value,T=>(r(),O(e(B),{key:T.value,value:T.value},{default:a(()=>[u(i(T.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),S.value.category?(r(),c("p",ga,i(S.value.category),1)):y("",!0)]),s("div",null,[t(e(F),{class:"text-sm font-medium"},{default:a(()=>m[24]||(m[24]=[u("MOF Registration")])),_:1,__:[24]}),t(e(St),{"model-value":R.value.mofRegistration?"yes":"no","onUpdate:modelValue":m[7]||(m[7]=T=>R.value.mofRegistration=T==="yes"),class:"flex gap-4 mt-2"},{default:a(()=>[s("div",_a,[t(e(Qe),{value:"yes",id:"mof-yes"}),t(e(F),{for:"mof-yes"},{default:a(()=>m[25]||(m[25]=[u("Yes")])),_:1,__:[25]})]),s("div",xa,[t(e(Qe),{value:"no",id:"mof-no"}),t(e(F),{for:"mof-no"},{default:a(()=>m[26]||(m[26]=[u("No")])),_:1,__:[26]})])]),_:1},8,["model-value"])]),R.value.mofRegistration?(r(),c("div",ba,[t(e(F),{for:"mofRegistrationNumber",class:"text-sm font-medium"},{default:a(()=>m[27]||(m[27]=[u(" MOF Registration Number "),s("span",{class:"text-red-500"},"*",-1)])),_:1,__:[27]}),t(e(le),{id:"mofRegistrationNumber",modelValue:R.value.mofRegistrationNumber,"onUpdate:modelValue":m[8]||(m[8]=T=>R.value.mofRegistrationNumber=T),placeholder:"MOF registration number",class:Q([{"border-red-500":S.value.mofRegistrationNumber},"mt-1"]),required:""},null,8,["modelValue","class"]),S.value.mofRegistrationNumber?(r(),c("p",ya,i(S.value.mofRegistrationNumber),1)):y("",!0)])):y("",!0),s("div",wa,[t(e(F),{for:"businessUrl",class:"text-sm font-medium"},{default:a(()=>m[28]||(m[28]=[u(" Business Website (Optional) ")])),_:1,__:[28]}),t(e(le),{id:"businessUrl","model-value":R.value.url||"","onUpdate:modelValue":m[9]||(m[9]=T=>R.value.url=String(T)),placeholder:"https://example.com (if any)",class:Q([{"border-red-500":S.value.url},"mt-1"]),type:"url"},null,8,["model-value","class"]),S.value.url?(r(),c("p",ka,i(S.value.url),1)):y("",!0)])]),s("div",ha,[t(e($),{type:"button",variant:"outline",onClick:v,disabled:e(U)},{default:a(()=>m[29]||(m[29]=[u(" Cancel ")])),_:1,__:[29]},8,["disabled"]),t(e($),{type:"submit",disabled:e(U),class:"flex items-center gap-2 min-w-[140px]"},{default:a(()=>[e(U)?(r(),c("div",$a)):y("",!0),u(" "+i(e(U)?"Updating...":"Update Business"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})],64))]))}}),Fn=Object.freeze(Object.defineProperty({__proto__:null,default:Ca},Symbol.toStringTag,{value:"Module"})),Sa={class:"space-y-6"},Va={class:"flex items-center justify-between"},Pa={class:"space-y-4"},Ra={class:"relative"},Ba={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Na={class:"flex items-end"},Ta={class:"flex items-center justify-between mb-4"},Fa={class:"text-xl font-semibold"},Aa={class:"text-base font-normal text-muted-foreground ml-2"},Ua={class:"flex items-center gap-2"},Ia={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},ja={key:1,class:"text-center py-12"},Oa={class:"mx-auto w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mb-4"},Ma={class:"text-muted-foreground mb-4"},Ea={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},La={class:"aspect-video w-full overflow-hidden bg-muted relative"},Da=["src","alt"],qa={class:"absolute top-2 right-2 flex gap-1"},za={class:"p-4 space-y-3"},Ya={class:"font-semibold text-lg line-clamp-1 mb-1"},Ha={class:"flex flex-wrap gap-1 mb-2"},Ga={class:"text-sm text-muted-foreground line-clamp-2"},Xa={key:0,class:"flex flex-wrap gap-1"},Qa={key:0,class:"inline-flex items-center px-2 py-1 bg-muted text-muted-foreground text-xs rounded-sm"},Wa={class:"flex items-center justify-between text-xs text-muted-foreground"},Za={class:"flex items-center gap-1"},Ja={class:"flex justify-between pt-2 gap-2"},Ka={class:"flex gap-1"},eo={key:3,class:"text-center py-12"},to={class:"mx-auto w-24 h-24 bg-muted rounded-full flex items-center justify-center mb-4"},so={class:"text-lg font-semibold mb-2"},lo={class:"text-muted-foreground mb-4"},ao={class:"flex justify-center gap-2"},oo={key:4,class:"flex items-center justify-between"},uo={class:"text-sm text-muted-foreground"},no={class:"flex items-center gap-1"},ro={class:"flex-1 overflow-y-auto px-6 py-4"},io={key:0,class:"grid gap-6"},co={class:"aspect-video w-full overflow-hidden bg-muted rounded-lg"},mo=["src","alt"],vo={class:"flex items-start justify-between mb-3"},fo={class:"text-2xl font-bold"},po={class:"flex gap-2"},go={class:"flex items-center gap-3 mb-4"},_o={class:"flex items-center gap-1 text-sm text-muted-foreground"},xo={class:"text-sm text-muted-foreground leading-relaxed"},bo={key:0},yo={class:"flex items-center gap-2"},wo=["href"],ko={key:1},ho={class:"flex flex-wrap gap-2"},$o={class:"grid grid-cols-2 gap-4"},Co={class:"space-y-2"},So={class:"flex justify-between"},Vo={class:"flex justify-between"},Po={class:"text-sm"},Ro={key:0,class:"flex justify-between"},Bo={class:"text-sm"},No={class:"space-y-2"},To={class:"flex justify-between"},Fo={class:"text-sm"},Ao={class:"flex justify-between"},Uo={class:"text-sm"},Io={class:"flex-1 overflow-y-auto px-6 py-4"},jo={class:"grid grid-cols-1 gap-4"},Oo={class:"grid grid-cols-2 gap-4"},Mo={class:"flex items-center justify-center"},Eo={class:"flex items-center space-x-2"},Lo=Me({__name:"index",setup(se){const N=b(!1),V=b(!1),A=b(!1),E=b(null),p=b(null),U=b(null),j=b(""),C=b(!1),h=b(!1),Y=b(null),P=b(1),R=b(9),S=b("newest"),g=b({category:"all",status:"all",featured:"all",tag:"all"}),v=b([]),f=b([]),w=b([]),M=b([]),oe=b([]),q={name:"",description:"",category:"",image:"",status:"active",featured:!1,tags:[],businessId:"",link:""},m=b({...q}),T=async()=>{try{const o=await X().get("/lookup?lookup_group=product_category",!0);v.value=o.data.lookup_data.map(l=>({value:l.value,label:l.title}))}catch(o){console.error("Error fetching product categories:",o)}},_e=async()=>{var o;try{C.value=!0,Y.value=null;const l=await X().get("/products",!0);if(l.success&&((o=l.data)!=null&&o.products))f.value=l.data.products;else throw new Error(l.message||"Failed to fetch products")}catch(l){console.error("Error fetching products:",l),Y.value=l.message||"Failed to load products",G.error("Failed to load products. Please try again.")}finally{C.value=!1}},de=async()=>{var o;try{const l=await X().get("/products/tags/all",!0);l.success&&((o=l.data)!=null&&o.tags)&&(M.value=l.data.tags,oe.value=l.data.tags.map(n=>n.name))}catch(l){console.error("Error fetching tags:",l)}},he=async()=>{try{const o=await X().get("/businesses",!0);console.log("response:",o.data.businesses),w.value=o.data.businesses.map(l=>({value:l.id,label:l.name}))}catch(o){console.error("Error fetching businesses:",o),G.error("Failed to load businesses. Please try again.")}},ce=async o=>{var l;try{const n=await X().post("/products",o,!0);if(n.success&&((l=n.data)!=null&&l.product))return f.value.unshift(n.data.product),G.success("Product created successfully!"),n.data.product;throw new Error(n.message||"Failed to create product")}catch(n){throw console.error("Error creating product:",n),G.error(n.message||"Failed to create product. Please try again."),n}},xe=async(o,l)=>{var n;try{const z=await X().put(`/products/${o}`,l,!0);if(z.success&&((n=z.data)!=null&&n.product)){const ke=f.value.findIndex(Se=>Se.id===o);return ke>-1&&(f.value[ke]=z.data.product),G.success("Product updated successfully!"),z.data.product}else throw new Error(z.message||"Failed to update product")}catch(z){throw console.error("Error updating product:",z),G.error(z.message||"Failed to update product. Please try again."),z}},me=async o=>{try{const l=await X().delete(`/products/${o}`,!0);if(l.success){const n=f.value.findIndex(z=>z.id===o);n>-1&&f.value.splice(n,1),G.success("Product deleted successfully!")}else throw new Error(l.message||"Failed to delete product")}catch(l){throw console.error("Error deleting product:",l),G.error(l.message||"Failed to delete product. Please try again."),l}},be=I(()=>{let o=[...f.value];if(j.value.trim()){const l=j.value.toLowerCase();o=o.filter(n=>n.name.toLowerCase().includes(l)||n.description.toLowerCase().includes(l)||n.category.toLowerCase().includes(l)||n.tags.some(z=>z.name.toLowerCase().includes(l)))}if(g.value.category!=="all"&&(o=o.filter(l=>l.category===g.value.category)),g.value.status!=="all"&&(o=o.filter(l=>l.status===g.value.status)),g.value.featured!=="all"){const l=g.value.featured==="true";o=o.filter(n=>n.featured===l)}switch(g.value.tag!=="all"&&(o=o.filter(l=>l.tags.some(n=>n.name===g.value.tag))),S.value){case"newest":o.sort((l,n)=>new Date(n.createdAt).getTime()-new Date(l.createdAt).getTime());break;case"oldest":o.sort((l,n)=>new Date(l.createdAt).getTime()-new Date(n.createdAt).getTime());break;case"name":o.sort((l,n)=>l.name.localeCompare(n.name));break;case"category":o.sort((l,n)=>l.category.localeCompare(n.category));break;case"status":o.sort((l,n)=>l.status.localeCompare(n.status));break}return o}),ue=I(()=>be.value.length),ne=I(()=>Math.ceil(ue.value/R.value)),ae=I(()=>(P.value-1)*R.value),ve=I(()=>ae.value+R.value),ye=I(()=>be.value.slice(ae.value,ve.value)),we=I(()=>{const o=[],l=Math.max(1,P.value-2),n=Math.min(ne.value,P.value+2);for(let z=l;z<=n;z++)o.push(z);return o}),$e=I(()=>j.value.trim()!==""||g.value.category!=="all"||g.value.status!=="all"||g.value.featured!=="all"||g.value.tag!=="all"),Re=I(()=>m.value.name.trim()!==""&&m.value.category!==""&&m.value.description.trim()!==""&&m.value.businessId!==""),Ce=o=>{const l=v.value.find(n=>n.value===o);return l?l.label:o},ie=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),k=()=>{P.value=1},d=()=>{j.value="",g.value={category:"all",status:"all",featured:"all",tag:"all"},S.value="newest",P.value=1},_=o=>{p.value=o,A.value=!0},re=o=>{var l;E.value=o,m.value={name:o.name,description:o.description,category:o.category,image:o.image||"",status:o.status,featured:o.featured,tags:((l=o.tags)==null?void 0:l.map(n=>n.name))||[],businessId:o.businessId?o.businessId.toString():"",link:o.link||""},A.value=!1,N.value=!0},Ye=o=>{const l=f.value.find(n=>n.id===o);l&&(U.value=l,V.value=!0)},tt=async()=>{if(U.value&&!h.value)try{h.value=!0,await me(U.value.id),V.value=!1,U.value=null}catch{}finally{h.value=!1}},He=async()=>{if(!(!Re.value||h.value))try{h.value=!0;const o={name:m.value.name,description:m.value.description,category:m.value.category,image:m.value.image||null,status:m.value.status,featured:m.value.featured,tags:m.value.tags,businessId:parseInt(m.value.businessId),link:m.value.link||null};E.value?await xe(E.value.id,o):await ce(o),Ge()}catch{}finally{h.value=!1}},Ge=()=>{N.value=!1,E.value=null,m.value={...q}},Be=o=>{o>=1&&o<=ne.value&&(P.value=o)},x=async o=>{try{await navigator.clipboard.writeText(o),G.success("Link copied to clipboard!")}catch(l){console.error("Failed to copy text: ",l),G.error("Failed to copy link")}};return Ee(async()=>{await Promise.all([_e(),de(),he(),T()])}),(o,l)=>(r(),c("div",Sa,[s("div",Va,[l[27]||(l[27]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"My Products"),s("p",{class:"text-muted-foreground mt-1"}," Manage your products and services ")],-1)),t(e($),{onClick:l[0]||(l[0]=n=>N.value=!0),disabled:h.value,class:"flex items-center gap-2"},{default:a(()=>[t(e(We),{class:"h-4 w-4"}),l[26]||(l[26]=u(" Product Form "))]),_:1,__:[26]},8,["disabled"])]),t(e(Z),null,{default:a(()=>[t(e(W),{class:"p-6"},{default:a(()=>[s("div",Pa,[s("div",Ra,[t(e(je),{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),t(e(le),{modelValue:j.value,"onUpdate:modelValue":l[1]||(l[1]=n=>j.value=n),placeholder:"Search your products, services, or tags...",class:"pl-9 w-full",onInput:k},null,8,["modelValue"])]),s("div",Ba,[s("div",null,[t(e(F),{for:"productCategory"},{default:a(()=>l[28]||(l[28]=[u("Category")])),_:1,__:[28]}),t(e(J),{modelValue:g.value.category,"onUpdate:modelValue":[l[2]||(l[2]=n=>g.value.category=n),k]},{default:a(()=>[t(e(K),{id:"productCategory",class:"w-full mt-1"},{default:a(()=>[t(e(ee),{placeholder:"All categories"})]),_:1}),t(e(te),null,{default:a(()=>[t(e(B),{value:"all"},{default:a(()=>l[29]||(l[29]=[u("All categories")])),_:1,__:[29]}),(r(!0),c(L,null,D(v.value,n=>(r(),O(e(B),{key:n.value,value:n.value},{default:a(()=>[u(i(n.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),s("div",null,[t(e(F),{for:"statusFilter"},{default:a(()=>l[30]||(l[30]=[u("Status")])),_:1,__:[30]}),t(e(J),{modelValue:g.value.status,"onUpdate:modelValue":[l[3]||(l[3]=n=>g.value.status=n),k]},{default:a(()=>[t(e(K),{id:"statusFilter",class:"w-full mt-1"},{default:a(()=>[t(e(ee),{placeholder:"All status"})]),_:1}),t(e(te),null,{default:a(()=>[t(e(B),{value:"all"},{default:a(()=>l[31]||(l[31]=[u("All status")])),_:1,__:[31]}),t(e(B),{value:"active"},{default:a(()=>l[32]||(l[32]=[u("Active")])),_:1,__:[32]}),t(e(B),{value:"inactive"},{default:a(()=>l[33]||(l[33]=[u("Inactive")])),_:1,__:[33]})]),_:1})]),_:1},8,["modelValue"])]),s("div",null,[t(e(F),{for:"featuredFilter"},{default:a(()=>l[34]||(l[34]=[u("Featured")])),_:1,__:[34]}),t(e(J),{modelValue:g.value.featured,"onUpdate:modelValue":[l[4]||(l[4]=n=>g.value.featured=n),k]},{default:a(()=>[t(e(K),{id:"featuredFilter",class:"w-full mt-1"},{default:a(()=>[t(e(ee),{placeholder:"All products"})]),_:1}),t(e(te),null,{default:a(()=>[t(e(B),{value:"all"},{default:a(()=>l[35]||(l[35]=[u("All products")])),_:1,__:[35]}),t(e(B),{value:"true"},{default:a(()=>l[36]||(l[36]=[u("Featured only")])),_:1,__:[36]}),t(e(B),{value:"false"},{default:a(()=>l[37]||(l[37]=[u("Non-featured")])),_:1,__:[37]})]),_:1})]),_:1},8,["modelValue"])]),s("div",null,[t(e(F),{for:"tagFilter"},{default:a(()=>l[38]||(l[38]=[u("Tag")])),_:1,__:[38]}),t(e(J),{modelValue:g.value.tag,"onUpdate:modelValue":[l[5]||(l[5]=n=>g.value.tag=n),k]},{default:a(()=>[t(e(K),{id:"tagFilter",class:"w-full mt-1"},{default:a(()=>[t(e(ee),{placeholder:"All tags"})]),_:1}),t(e(te),null,{default:a(()=>[t(e(B),{value:"all"},{default:a(()=>l[39]||(l[39]=[u("All tags")])),_:1,__:[39]}),(r(!0),c(L,null,D(M.value,n=>(r(),O(e(B),{key:n.id,value:n.name},{default:a(()=>[u(i(n.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),s("div",Na,[t(e($),{variant:"outline",class:"w-full flex items-center gap-2",onClick:d},{default:a(()=>[t(e(Oe),{class:"h-4 w-4"}),l[40]||(l[40]=u(" Reset "))]),_:1,__:[40]})])])])]),_:1})]),_:1}),s("div",null,[s("div",Ta,[s("h2",Fa,[l[41]||(l[41]=u(" Your Products ")),s("span",Aa," ("+i(ue.value)+" products) ",1)]),s("div",Ua,[l[47]||(l[47]=s("p",{class:"text-sm text-muted-foreground"},"Sort by:",-1)),t(e(J),{modelValue:S.value,"onUpdate:modelValue":[l[6]||(l[6]=n=>S.value=n),k]},{default:a(()=>[t(e(K),{class:"w-[180px] h-8"},{default:a(()=>[t(e(ee))]),_:1}),t(e(te),null,{default:a(()=>[t(e(B),{value:"newest"},{default:a(()=>l[42]||(l[42]=[u("Newest")])),_:1,__:[42]}),t(e(B),{value:"oldest"},{default:a(()=>l[43]||(l[43]=[u("Oldest")])),_:1,__:[43]}),t(e(B),{value:"name"},{default:a(()=>l[44]||(l[44]=[u("Name A-Z")])),_:1,__:[44]}),t(e(B),{value:"category"},{default:a(()=>l[45]||(l[45]=[u("Category")])),_:1,__:[45]}),t(e(B),{value:"status"},{default:a(()=>l[46]||(l[46]=[u("Status")])),_:1,__:[46]})]),_:1})]),_:1},8,["modelValue"])])]),C.value?(r(),c("div",Ia,[(r(),c(L,null,D(6,n=>t(e(Z),{key:n,class:"animate-pulse"},{default:a(()=>[t(e(W),{class:"p-4"},{default:a(()=>l[48]||(l[48]=[s("div",{class:"space-y-3"},[s("div",{class:"h-32 bg-muted rounded"}),s("div",{class:"h-4 bg-muted rounded w-3/4"}),s("div",{class:"h-3 bg-muted rounded w-1/2"}),s("div",{class:"h-3 bg-muted rounded"})],-1)])),_:1,__:[48]})]),_:2},1024)),64))])):Y.value?(r(),c("div",ja,[s("div",Oa,[t(e(It),{class:"h-8 w-8 text-red-600"})]),l[50]||(l[50]=s("h3",{class:"text-lg font-semibold mb-2"},"Error Loading Products",-1)),s("p",Ma,i(Y.value),1),t(e($),{onClick:_e,class:"flex items-center gap-2"},{default:a(()=>[t(e(Oe),{class:"h-4 w-4"}),l[49]||(l[49]=u(" Try Again "))]),_:1,__:[49]})])):ye.value.length>0?(r(),c("div",Ea,[(r(!0),c(L,null,D(ye.value,n=>(r(),O(e(Z),{key:n.id,class:"hover:shadow-md transition-shadow overflow-hidden"},{default:a(()=>[t(e(W),{class:"p-0"},{default:a(()=>[s("div",La,[s("img",{src:n.image,alt:n.name,class:"h-full w-full object-cover",loading:"lazy"},null,8,Da),s("div",qa,[t(e(H),{variant:n.status==="active"?"default":"secondary",class:"text-xs capitalize"},{default:a(()=>[u(i(n.status),1)]),_:2},1032,["variant"]),n.featured?(r(),O(e(H),{key:0,variant:"default",class:"text-xs bg-yellow-500"},{default:a(()=>l[51]||(l[51]=[u(" Featured ")])),_:1,__:[51]})):y("",!0)])]),s("div",za,[s("div",null,[s("h3",Ya,i(n.name),1),s("div",Ha,[t(e(H),{variant:"outline",class:"text-xs"},{default:a(()=>[u(i(Ce(n.category)),1)]),_:2},1024),n.business?(r(),O(e(H),{key:0,variant:"secondary",class:"text-xs"},{default:a(()=>[u(i(n.business.label),1)]),_:2},1024)):y("",!0)])]),s("p",Ga,i(n.description),1),n.tags&&n.tags.length>0?(r(),c("div",Xa,[(r(!0),c(L,null,D(n.tags.slice(0,3),z=>(r(),c("div",{key:z.id,class:"inline-flex items-center gap-1 px-2 py-1 bg-secondary text-secondary-foreground text-xs rounded-sm"},[t(e(pe),{class:"h-3 w-3"}),u(" "+i(z.name),1)]))),128)),n.tags.length>3?(r(),c("div",Qa," +"+i(n.tags.length-3)+" more ",1)):y("",!0)])):y("",!0),s("div",Wa,[s("span",null,"Created: "+i(ie(n.createdAt)),1),s("div",Za,[t(e(ot),{class:"h-3 w-3"}),u(" "+i(ie(n.createdAt)),1)])]),s("div",Ja,[s("div",Ka,[t(e($),{variant:"outline",size:"sm",class:"flex items-center gap-1 flex-1",onClick:z=>_(n)},{default:a(()=>[t(e(dt),{class:"h-3 w-3"}),l[52]||(l[52]=u(" View "))]),_:2,__:[52]},1032,["onClick"]),t(e($),{variant:"outline",size:"sm",class:"flex items-center gap-1 flex-1",onClick:z=>re(n)},{default:a(()=>[t(e(Ke),{class:"h-3 w-3"}),l[53]||(l[53]=u(" Edit "))]),_:2,__:[53]},1032,["onClick"])]),t(e($),{variant:"destructive",size:"sm",class:"flex items-center gap-1",onClick:z=>Ye(n.id),disabled:h.value},{default:a(()=>[t(e(it),{class:"h-3 w-3"})]),_:2},1032,["onClick","disabled"])])])]),_:2},1024)]),_:2},1024))),128))])):(r(),c("div",eo,[s("div",to,[t(e(Vt),{class:"h-8 w-8 text-muted-foreground"})]),s("h3",so,i($e.value?"No products found":"No products yet"),1),s("p",lo,i($e.value?"Try adjusting your search criteria or reset filters":`You haven't added any products yet. Click "Add Product" to get started.`),1),s("div",ao,[$e.value?(r(),O(e($),{key:0,variant:"outline",onClick:d,class:"flex items-center gap-2"},{default:a(()=>[t(e(Oe),{class:"h-4 w-4"}),l[54]||(l[54]=u(" Reset Filters "))]),_:1,__:[54]})):y("",!0),t(e($),{onClick:l[7]||(l[7]=n=>N.value=!0),class:"flex items-center gap-2"},{default:a(()=>[t(e(We),{class:"h-4 w-4"}),l[55]||(l[55]=u(" Product Form "))]),_:1,__:[55]})])])),ye.value.length>0&&ne.value>1?(r(),c("div",oo,[s("p",uo," Showing "+i(ae.value+1)+"-"+i(Math.min(ve.value,ue.value))+" of "+i(ue.value)+" products ",1),s("div",no,[t(e($),{variant:"outline",size:"icon",disabled:P.value===1,onClick:l[8]||(l[8]=n=>Be(P.value-1))},{default:a(()=>[t(e(nt),{class:"h-4 w-4"})]),_:1},8,["disabled"]),(r(!0),c(L,null,D(we.value,n=>(r(),O(e($),{key:n,variant:n===P.value?"default":"outline",size:"sm",class:"h-8 w-8",onClick:z=>Be(n)},{default:a(()=>[u(i(n),1)]),_:2},1032,["variant","onClick"]))),128)),t(e($),{variant:"outline",size:"icon",disabled:P.value===ne.value,onClick:l[9]||(l[9]=n=>Be(P.value+1))},{default:a(()=>[t(e(rt),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):y("",!0)]),t(e(Ie),{open:A.value,"onUpdate:open":l[13]||(l[13]=n=>A.value=n)},{default:a(()=>[t(e(Ne),{class:"sm:max-w-[700px] max-h-[90vh] flex flex-col p-0"},{default:a(()=>[t(e(Te),{class:"px-6 py-4 border-b"},{default:a(()=>[t(e(Fe),null,{default:a(()=>l[56]||(l[56]=[u("Product Details")])),_:1,__:[56]}),t(e(Ae),null,{default:a(()=>l[57]||(l[57]=[u(" Detailed information about your product ")])),_:1,__:[57]})]),_:1}),s("div",ro,[p.value?(r(),c("div",io,[s("div",co,[s("img",{src:p.value.image,alt:p.value.name,class:"h-full w-full object-cover"},null,8,mo)]),s("div",null,[s("div",vo,[s("h2",fo,i(p.value.name),1),s("div",po,[t(e(H),{variant:p.value.status==="active"?"default":"secondary",class:"capitalize"},{default:a(()=>[u(i(p.value.status),1)]),_:1},8,["variant"]),p.value.featured?(r(),O(e(H),{key:0,variant:"default",class:"bg-yellow-500"},{default:a(()=>l[58]||(l[58]=[u(" Featured ")])),_:1,__:[58]})):y("",!0)])]),s("div",go,[t(e(H),{variant:"outline"},{default:a(()=>[u(i(Ce(p.value.category)),1)]),_:1}),p.value.business?(r(),O(e(H),{key:0,variant:"secondary"},{default:a(()=>[u(i(p.value.business.label),1)]),_:1})):y("",!0),s("div",_o,[t(e(ot),{class:"h-4 w-4"}),u(" Created "+i(ie(p.value.createdAt)),1)])])]),t(e(ge)),s("div",null,[l[59]||(l[59]=s("h3",{class:"font-semibold mb-3"},"Product Description",-1)),s("p",xo,i(p.value.description),1)]),t(e(ge)),p.value.link?(r(),c("div",bo,[l[60]||(l[60]=s("h3",{class:"font-semibold mb-3"},"Product Link",-1)),s("div",yo,[s("a",{href:p.value.link,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 underline text-sm break-all"},i(p.value.link),9,wo),s("button",{onClick:l[10]||(l[10]=n=>x(p.value.link)),class:"text-gray-500 hover:text-gray-700 text-xs",type:"button"}," Copy ")])])):y("",!0),t(e(ge)),p.value.tags&&p.value.tags.length>0?(r(),c("div",ko,[l[61]||(l[61]=s("h3",{class:"font-semibold mb-3"},"Tags",-1)),s("div",ho,[(r(!0),c(L,null,D(p.value.tags,n=>(r(),c("div",{key:n.id,class:"inline-flex items-center gap-1 px-3 py-1 bg-secondary text-secondary-foreground text-sm rounded-md"},[t(e(pe),{class:"h-3 w-3"}),u(" "+i(n.name),1)]))),128))])])):y("",!0),t(e(ge)),s("div",null,[l[67]||(l[67]=s("h3",{class:"font-semibold mb-3"},"Product Information",-1)),s("div",$o,[s("div",Co,[s("div",So,[l[62]||(l[62]=s("span",{class:"text-sm text-muted-foreground"},"Status:",-1)),t(e(H),{variant:p.value.status==="active"?"default":"secondary",class:"text-xs"},{default:a(()=>[u(i(p.value.status),1)]),_:1},8,["variant"])]),s("div",Vo,[l[63]||(l[63]=s("span",{class:"text-sm text-muted-foreground"},"Category:",-1)),s("span",Po,i(Ce(p.value.category)),1)]),p.value.business?(r(),c("div",Ro,[l[64]||(l[64]=s("span",{class:"text-sm text-muted-foreground"},"Business:",-1)),s("span",Bo,i(p.value.business.label),1)])):y("",!0)]),s("div",No,[s("div",To,[l[65]||(l[65]=s("span",{class:"text-sm text-muted-foreground"},"Featured:",-1)),s("span",Fo,i(p.value.featured?"Yes":"No"),1)]),s("div",Ao,[l[66]||(l[66]=s("span",{class:"text-sm text-muted-foreground"},"Created:",-1)),s("span",Uo,i(ie(p.value.createdAt)),1)])])])])])):y("",!0)]),t(e(Ue),{class:"px-6 py-4 border-t gap-2"},{default:a(()=>[t(e($),{variant:"outline",onClick:l[11]||(l[11]=n=>A.value=!1)},{default:a(()=>l[68]||(l[68]=[u(" Close ")])),_:1,__:[68]}),t(e($),{class:"flex items-center gap-2",onClick:l[12]||(l[12]=n=>re(p.value))},{default:a(()=>[t(e(Ke),{class:"h-4 w-4"}),l[69]||(l[69]=u(" Edit Product "))]),_:1,__:[69]})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(Ie),{open:N.value,"onUpdate:open":l[23]||(l[23]=n=>N.value=n)},{default:a(()=>[t(e(Ne),{class:"sm:max-w-[600px] max-h-[90vh] flex flex-col p-0"},{default:a(()=>[t(e(Te),{class:"px-6 py-4 border-b"},{default:a(()=>[t(e(Fe),null,{default:a(()=>[u(i(E.value?"Edit Product":"Add New Product"),1)]),_:1}),t(e(Ae),null,{default:a(()=>[u(i(E.value?"Update your product information.":"Fill in the form below to add a new product."),1)]),_:1})]),_:1}),s("div",Io,[s("form",{onSubmit:ct(He,["prevent"]),class:"space-y-6"},[s("div",jo,[s("div",null,[t(e(F),{for:"productName"},{default:a(()=>l[70]||(l[70]=[u("Product Name *")])),_:1,__:[70]}),t(e(le),{id:"productName",modelValue:m.value.name,"onUpdate:modelValue":l[14]||(l[14]=n=>m.value.name=n),placeholder:"Enter product name",class:"mt-1",required:""},null,8,["modelValue"])]),s("div",null,[t(e(F),{for:"productBusiness"},{default:a(()=>l[71]||(l[71]=[u("Business *")])),_:1,__:[71]}),t(e(J),{modelValue:m.value.businessId,"onUpdate:modelValue":l[15]||(l[15]=n=>m.value.businessId=n)},{default:a(()=>[t(e(K),{id:"productBusiness",class:"w-full mt-1"},{default:a(()=>[t(e(ee),{placeholder:"Select business"})]),_:1}),t(e(te),null,{default:a(()=>[(r(!0),c(L,null,D(w.value,n=>(r(),O(e(B),{key:n.value,value:n.value.toString()},{default:a(()=>[u(i(n.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),s("div",null,[t(e(F),{for:"productCategory"},{default:a(()=>l[72]||(l[72]=[u("Category *")])),_:1,__:[72]}),t(e(J),{modelValue:m.value.category,"onUpdate:modelValue":l[16]||(l[16]=n=>m.value.category=n)},{default:a(()=>[t(e(K),{id:"productCategory",class:"w-full mt-1"},{default:a(()=>[t(e(ee),{placeholder:"Select category"})]),_:1}),t(e(te),null,{default:a(()=>[(r(!0),c(L,null,D(v.value,n=>(r(),O(e(B),{key:n.value,value:n.value},{default:a(()=>[u(i(n.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),s("div",null,[t(e(F),{for:"productDescription"},{default:a(()=>l[73]||(l[73]=[u("Description *")])),_:1,__:[73]}),t(e(ut),{id:"productDescription",modelValue:m.value.description,"onUpdate:modelValue":l[17]||(l[17]=n=>m.value.description=n),placeholder:"Enter detailed product description",class:"mt-1",rows:"4",required:""},null,8,["modelValue"])]),s("div",null,[t(e(F),{for:"productImage"},{default:a(()=>l[74]||(l[74]=[u("Product Image URL")])),_:1,__:[74]}),t(e(le),{id:"productImage",modelValue:m.value.image,"onUpdate:modelValue":l[18]||(l[18]=n=>m.value.image=n),placeholder:"Enter image URL (optional)",class:"mt-1"},null,8,["modelValue"]),l[75]||(l[75]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Leave empty for default placeholder image ",-1))]),s("div",null,[t(e(F),{for:"productLink"},{default:a(()=>l[76]||(l[76]=[u("Product Link")])),_:1,__:[76]}),t(e(le),{id:"productLink",modelValue:m.value.link,"onUpdate:modelValue":l[19]||(l[19]=n=>m.value.link=n),placeholder:"Enter product link (e.g., Shopee, Lazada)",class:"mt-1"},null,8,["modelValue"]),l[77]||(l[77]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Add link to your product on external platforms ",-1))]),s("div",null,[t(e(F),{for:"productTags"},{default:a(()=>l[78]||(l[78]=[u("Tags")])),_:1,__:[78]}),t(e(Bt),{id:"productTags",modelValue:m.value.tags,"onUpdate:modelValue":l[20]||(l[20]=n=>m.value.tags=n),suggestions:oe.value,"max-tags":10,placeholder:"Add tags for product matching...","help-text":"Press Enter or comma to add tags. Tags help with product matching.",class:"mt-1"},null,8,["modelValue","suggestions"])]),s("div",Oo,[s("div",null,[t(e(F),{for:"productStatus"},{default:a(()=>l[79]||(l[79]=[u("Status")])),_:1,__:[79]}),t(e(J),{modelValue:m.value.status,"onUpdate:modelValue":l[21]||(l[21]=n=>m.value.status=n)},{default:a(()=>[t(e(K),{id:"productStatus",class:"w-full mt-1"},{default:a(()=>[t(e(ee),{placeholder:"Select status"})]),_:1}),t(e(te),null,{default:a(()=>[t(e(B),{value:"active"},{default:a(()=>l[80]||(l[80]=[u("Active")])),_:1,__:[80]}),t(e(B),{value:"inactive"},{default:a(()=>l[81]||(l[81]=[u("Inactive")])),_:1,__:[81]})]),_:1})]),_:1},8,["modelValue"])]),s("div",Mo,[s("div",Eo,[jt(s("input",{id:"featured",type:"checkbox","onUpdate:modelValue":l[22]||(l[22]=n=>m.value.featured=n),class:"rounded"},null,512),[[Ot,m.value.featured]]),t(e(F),{for:"featured"},{default:a(()=>l[82]||(l[82]=[u("Featured product")])),_:1,__:[82]})])])])])],32)]),t(e(Ue),{class:"px-6 py-4 border-t"},{default:a(()=>[t(e($),{variant:"outline",onClick:Ge,type:"button"},{default:a(()=>l[83]||(l[83]=[u(" Cancel ")])),_:1,__:[83]}),t(e($),{onClick:He,type:"submit",disabled:!Re.value||h.value},{default:a(()=>[u(i(E.value?"Update Product":"Create Product"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),t(e(Ie),{open:V.value,"onUpdate:open":l[25]||(l[25]=n=>V.value=n)},{default:a(()=>[t(e(Ne),{class:"sm:max-w-[400px]"},{default:a(()=>[t(e(Te),null,{default:a(()=>[t(e(Fe),null,{default:a(()=>l[84]||(l[84]=[u("Delete Product")])),_:1,__:[84]}),t(e(Ae),null,{default:a(()=>{var n;return[u(' Are you sure you want to delete "'+i((n=U.value)==null?void 0:n.name)+'"? This action cannot be undone. ',1)]}),_:1})]),_:1}),t(e(Ue),{class:"gap-2"},{default:a(()=>[t(e($),{variant:"outline",onClick:l[24]||(l[24]=n=>V.value=!1),type:"button"},{default:a(()=>l[85]||(l[85]=[u(" Cancel ")])),_:1,__:[85]}),t(e($),{variant:"destructive",onClick:tt,type:"button",disabled:h.value},{default:a(()=>l[86]||(l[86]=[u(" Delete Product ")])),_:1,__:[86]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]))}}),An=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"})),Do={class:"space-y-6"},qo={class:"relative"},zo={class:"space-y-6"},Yo={class:"relative group"},Ho={class:"relative bg-card border border-border rounded-lg p-1 shadow-sm"},Go={class:"flex items-center"},Xo={class:"flex-1 relative"},Qo={key:0,class:"absolute top-full left-0 right-0 mt-2 bg-popover border border-border rounded-md shadow-md z-50 max-h-64 overflow-y-auto"},Wo={class:"p-2"},Zo={key:0,class:"mb-2"},Jo=["onClick"],Ko={class:"text-sm"},eu={key:1},tu=["onClick"],su={class:"text-sm"},lu={class:"flex flex-wrap gap-3 justify-center"},au={key:0,class:"mt-4"},ou={class:"flex items-center gap-2 flex-wrap"},uu=["onClick"],nu={class:"grid grid-cols-1 gap-6"},ru={class:"space-y-3"},du={class:"flex justify-between items-center mt-6 pt-4 border-t"},iu={class:"text-sm text-muted-foreground"},cu={class:"flex gap-2"},mu={class:"flex items-center justify-between mb-4"},vu={class:"text-xl font-semibold"},fu={class:"text-base font-normal text-muted-foreground ml-2"},pu={class:"flex items-center gap-2"},gu={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},_u={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},xu={class:"aspect-video w-full overflow-hidden bg-muted rounded-t-lg relative"},bu=["src","alt"],yu={class:"absolute top-2 right-2"},wu={key:0,class:"absolute top-2 left-2"},ku={class:"p-4 space-y-3"},hu={class:"font-semibold text-lg line-clamp-1 mb-1"},$u={class:"space-y-2"},Cu={key:0,class:"flex items-center gap-2"},Su={class:"text-sm text-muted-foreground truncate"},Vu={key:1,class:"flex items-center gap-2"},Pu={class:"text-sm text-muted-foreground truncate"},Ru={key:2,class:"flex flex-wrap gap-1"},Bu={key:0,class:"inline-flex items-center px-2 py-1 bg-muted text-muted-foreground text-xs rounded-sm"},Nu={class:"flex items-center justify-end pt-2"},Tu={key:2,class:"text-center py-12"},Fu={class:"mx-auto w-24 h-24 bg-muted rounded-full flex items-center justify-center mb-4"},Au={key:3,class:"flex items-center justify-between"},Uu={class:"text-sm text-muted-foreground"},Iu={class:"flex items-center gap-1"},ju={class:"flex-1 overflow-y-auto px-6 py-4"},Ou={key:0,class:"grid gap-6"},Mu={class:"aspect-video w-full overflow-hidden bg-muted rounded-lg"},Eu=["src","alt"],Lu={class:"flex items-start justify-between mb-3"},Du={class:"text-2xl font-bold"},qu={class:"flex gap-2"},zu={class:"flex items-center gap-3 mb-4"},Yu={class:"text-sm text-muted-foreground leading-relaxed"},Hu={key:0,class:"mt-4"},Gu={class:"text-sm text-muted-foreground space-y-1"},Xu={key:0},Qu={class:"flex items-center gap-2"},Wu=["href"],Zu={class:"flex items-center justify-between mb-4"},Ju={class:"flex gap-2"},Ku={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},en={class:"space-y-4"},tn={class:"flex items-start gap-3"},sn={class:"min-w-0 flex-1"},ln={class:"font-medium truncate"},an={class:"text-sm text-muted-foreground"},on={key:0,class:"text-xs text-muted-foreground"},un={class:"flex items-start gap-3"},nn={class:"min-w-0 flex-1"},rn={class:"text-sm"},dn={key:0,class:"flex items-center gap-3"},cn={class:"text-sm"},mn={key:1,class:"flex items-center gap-3"},vn=["href"],fn={class:"space-y-4"},pn={key:0,class:"flex items-center gap-3"},gn={class:"text-sm text-muted-foreground"},_n={key:1,class:"flex items-center gap-3"},xn={class:"text-sm text-muted-foreground"},bn={key:2,class:"flex items-center gap-3"},yn={class:"text-sm text-muted-foreground"},wn={key:3,class:"flex items-center gap-3"},kn={class:"text-sm text-muted-foreground"},hn=Me({__name:"index",setup(se){const N=b(""),V=b(!1),A=b(null),E=b(!1),p=b(null),U=b(1),j=b(9),C=b("relevance"),h=b(!1),Y=b(["water quality system","batik clothing","halal food"]),P=b(!1),R=b(),S=b(),g=b([]),v=b([]),f=b({category:"all",tag:"all"}),w=b([{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing & Fashion"},{value:"food",label:"Food & Beverages"},{value:"services",label:"Professional Services"},{value:"healthcare",label:"Healthcare"},{value:"education",label:"Education"},{value:"automotive",label:"Automotive"},{value:"construction",label:"Construction"}]),M=b([{text:"Smart Water Management",icon:"SmartphoneIcon",category:"Electronics"},{text:"Batik Collection",icon:"ShirtIcon",category:"Clothing"},{text:"Halal Food Products",icon:"UtensilsIcon",category:"Food"},{text:"Financial Consulting",icon:"BriefcaseIcon",category:"Services"},{text:"Healthcare Services",icon:"HeartHandshakeIcon",category:"Healthcare"},{text:"Digital Skills Training",icon:"GraduationCapIcon",category:"Education"},{text:"EV Maintenance",icon:"CarIcon",category:"Automotive"},{text:"Smart Building IoT",icon:"HammerIcon",category:"Construction"}]),oe=I(()=>v.value.slice(0,8).map(x=>({label:x.name,value:x.slug,icon:"TagIcon",type:"tag"}))),q=async()=>{try{const x=await X().get("/lookup?lookup_group=product_category",!0);w.value=x.data.lookup_data.map(o=>({value:o.value,label:o.title}))}catch{}},m=async()=>{var x;try{V.value=!0,A.value=null;const o=await X().get("/products/all",!1);if(o.success&&((x=o.data)!=null&&x.products))g.value=o.data.products.map(l=>{var n,z,ke,Se,Le,De,qe;return{...l,businessName:((n=l.business)==null?void 0:n.name)||"Business Name Not Available",businessType:((z=l.business)==null?void 0:z.type)||"Unknown",market:l.market||"Local",location:((ke=l.business)==null?void 0:ke.address)||"Malaysia",fullAddress:((Se=l.business)==null?void 0:Se.address)||"Address Not Available",rating:l.rating||4.5,reviewCount:l.reviewCount||Math.floor(Math.random()*200)+10,isVerified:((Le=l.business)==null?void 0:Le.mofRegistration)||!1,contact:{phone:((De=l.business)==null?void 0:De.phone)||"03-XXXX-XXXX",email:"contact@business.com",website:(qe=l.business)==null?void 0:qe.url}}});else throw new Error(o.message||"Failed to fetch products")}catch(o){console.error("Error fetching products:",o),A.value=o.message||"Failed to load products",G.error("Failed to load products. Please try again.")}finally{V.value=!1}},T=async()=>{var x;try{const o=await X().get("/products/tags/all-public",!1);if(o.success&&((x=o.data)!=null&&x.tags)){v.value=o.data.tags;const l=o.data.tags.map(n=>({text:n.name,icon:"TagIcon",category:"Tag"}));M.value=[...M.value,...l]}}catch(o){console.error("Error fetching tags:",o)}},_e=I(()=>{let x=[...g.value];if(N.value.trim()){const o=N.value.toLowerCase();x=x.filter(l=>l.name.toLowerCase().includes(o)||l.description.toLowerCase().includes(o)||l.businessName&&l.businessName.toLowerCase().includes(o)||l.category.toLowerCase().includes(o)||l.tags.some(n=>n.name.toLowerCase().includes(o)))}switch(f.value.category!=="all"&&(x=x.filter(o=>o.category===f.value.category)),f.value.tag!=="all"&&(x=x.filter(o=>o.tags.some(l=>l.slug===f.value.tag))),C.value){case"newest":x.sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime());break;case"oldest":x.sort((o,l)=>new Date(o.createdAt).getTime()-new Date(l.createdAt).getTime());break;case"name":x.sort((o,l)=>o.name.localeCompare(l.name));break;default:x.sort((o,l)=>o.name.localeCompare(l.name))}return x}),de=I(()=>_e.value.length),he=I(()=>Math.ceil(de.value/j.value)),ce=I(()=>(U.value-1)*j.value),xe=I(()=>ce.value+j.value),me=I(()=>_e.value.slice(ce.value,xe.value)),be=I(()=>{const x=[],o=Math.max(1,U.value-2),l=Math.min(he.value,U.value+2);for(let n=o;n<=l;n++)x.push(n);return x}),ue=I(()=>{if(!N.value.trim())return[];const x=N.value.toLowerCase();return M.value.filter(o=>o.text.toLowerCase().includes(x))}),ne=I(()=>{const x=[];if(f.value.category!=="all"){const o=w.value.find(l=>l.value===f.value.category);x.push({key:"category",label:"Category",value:(o==null?void 0:o.label)||f.value.category,icon:pe})}if(f.value.tag!=="all"){const o=v.value.find(l=>l.slug===f.value.tag);x.push({key:"tag",label:"Tag",value:(o==null?void 0:o.name)||f.value.tag,icon:pe})}return x});function ae(){V.value=!0,U.value=1,setTimeout(()=>{V.value=!1},500)}function ve(){N.value="",f.value={category:"all",tag:"all"},C.value="relevance",U.value=1,ae()}function ye(x){p.value=x,E.value=!0}function we(x){x>=1&&x<=he.value&&(U.value=x)}function $e(){var x,o,l,n;(o=(x=p.value)==null?void 0:x.contact)!=null&&o.email?window.open(`mailto:${p.value.contact.email}`,"_blank"):(n=(l=p.value)==null?void 0:l.contact)!=null&&n.phone&&window.open(`tel:${p.value.contact.phone}`,"_blank")}function Re(){var x;(x=p.value)!=null&&x.link&&window.open(p.value.link,"_blank","noopener,noreferrer")}const Ce=async x=>{try{await navigator.clipboard.writeText(x),G.success("Link copied to clipboard!")}catch(o){console.error("Failed to copy text: ",o),G.error("Failed to copy link")}},ie=x=>({"sole-proprietorship":"Sole Proprietorship",partnership:"Partnership","sdn-bhd":"Sdn Bhd",berhad:"Berhad"})[x]||x,k=x=>({manufacturing:"Manufacturing",service:"Service"})[x]||x,d=x=>({startup:"Startup",micro:"Micro",small:"Small",medium:"Medium",large:"Large"})[x]||x,_=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),re=()=>{clearTimeout(S.value),S.value=setTimeout(()=>{ae()},300)},Ye=x=>{N.value=x,h.value=!1;const o=Y.value.indexOf(x);o>-1&&Y.value.splice(o,1),Y.value.unshift(x),Y.value=Y.value.slice(0,5),ae()},tt=x=>{x.type==="category"?f.value.category=x.value:x.type==="tag"&&(f.value.tag=x.value),ae()},He=x=>{x==="category"?f.value.category="all":x==="tag"&&(f.value.tag="all"),ae()},Ge=()=>{f.value={category:"all",tag:"all"},ae()},Be=x=>{var o;(o=R.value)!=null&&o.contains(x.target)||(h.value=!1)};return Ee(async()=>{document.addEventListener("click",Be),await Promise.all([m(),T(),q()])}),Mt(()=>{document.removeEventListener("click",Be)}),(x,o)=>(r(),c("div",Do,[o[49]||(o[49]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Product Matching"),s("p",{class:"text-muted-foreground mt-1"}," Find products and services from DPIM members nationwide ")],-1)),s("div",qo,[t(e(Z),{class:"border-none shadow-lg bg-gradient-to-br from-background to-muted/50"},{default:a(()=>[t(e(W),{class:"p-8"},{default:a(()=>[s("div",zo,[s("div",Yo,[o[13]||(o[13]=s("div",{class:"absolute -inset-0.5 bg-gradient-to-r from-primary to-primary/60 rounded-lg blur opacity-25 group-hover:opacity-40 transition duration-300"},null,-1)),s("div",Ho,[s("div",Go,[s("div",Xo,[t(e(je),{class:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),t(e(le),{ref_key:"searchInputRef",ref:R,modelValue:N.value,"onUpdate:modelValue":o[0]||(o[0]=l=>N.value=l),placeholder:"Search for products, services, or businesses...",class:"pl-12 pr-4 py-4 text-lg border-0 shadow-none focus-visible:ring-0 bg-transparent h-auto",onInput:re,onFocus:o[1]||(o[1]=l=>h.value=!0)},null,8,["modelValue"])]),t(e($),{size:"lg",class:"mx-2",onClick:ae,disabled:V.value},{default:a(()=>[t(e(je),{class:"h-4 w-4 mr-2"}),u(" "+i(V.value?"Searching...":"Search"),1)]),_:1},8,["disabled"])]),h.value&&(ue.value.length>0||N.value.trim())?(r(),c("div",Qo,[s("div",Wo,[Y.value.length>0&&!N.value.trim()?(r(),c("div",Zo,[o[11]||(o[11]=s("p",{class:"text-xs text-muted-foreground px-3 py-2 font-medium"}," Recent Searches ",-1)),(r(!0),c(L,null,D(Y.value.slice(0,3),(l,n)=>(r(),c("div",{key:n,class:"flex items-center px-3 py-2 hover:bg-accent hover:text-accent-foreground rounded-sm cursor-pointer",onClick:z=>Ye(l)},[t(e(zt),{class:"h-4 w-4 text-muted-foreground mr-3"}),s("span",Ko,i(l),1)],8,Jo))),128))])):y("",!0),ue.value.length>0?(r(),c("div",eu,[o[12]||(o[12]=s("p",{class:"text-xs text-muted-foreground px-3 py-2 font-medium"}," Suggestions ",-1)),(r(!0),c(L,null,D(ue.value.slice(0,5),l=>(r(),c("div",{key:l.text,class:"flex items-center px-3 py-2 hover:bg-accent hover:text-accent-foreground rounded-sm cursor-pointer",onClick:n=>Ye(l.text)},[(r(),O($t(l.icon),{class:"h-4 w-4 text-muted-foreground mr-3"})),s("span",su,i(l.text),1),t(e(H),{variant:"outline",class:"ml-auto text-xs"},{default:a(()=>[u(i(l.category),1)]),_:2},1024)],8,tu))),128))])):y("",!0)])])):y("",!0)])]),s("div",lu,[(r(!0),c(L,null,D(oe.value,l=>(r(),O(e($),{key:l.value,variant:"outline",size:"sm",class:"rounded-full hover:bg-accent hover:text-accent-foreground transition-colors",onClick:n=>tt(l)},{default:a(()=>[t(e(pe),{class:"h-4 w-4 mr-2"}),u(" "+i(l.label),1)]),_:2},1032,["onClick"]))),128))])])]),_:1})]),_:1}),ne.value.length>0?(r(),c("div",au,[s("div",ou,[o[15]||(o[15]=s("p",{class:"text-sm font-medium text-muted-foreground"}," Active filters: ",-1)),t(Et,{name:"filter-tag",tag:"div",class:"flex gap-2 flex-wrap"},{default:a(()=>[(r(!0),c(L,null,D(ne.value,l=>(r(),O(e(H),{key:l.key,variant:"secondary",class:"inline-flex items-center gap-2 px-3 py-1 cursor-pointer hover:bg-secondary/80 transition-colors group"},{default:a(()=>[(r(),O($t(l.icon),{class:"h-3 w-3"})),s("span",null,i(l.label)+": "+i(l.value),1),s("button",{onClick:n=>He(l.key),class:"ml-1 hover:bg-accent rounded-full p-0.5 transition-colors"},[t(e(Yt),{class:"h-3 w-3"})],8,uu)]),_:2},1024))),128))]),_:1}),t(e($),{variant:"ghost",size:"sm",class:"text-muted-foreground hover:text-destructive",onClick:Ge},{default:a(()=>[t(e(it),{class:"h-3 w-3 mr-1"}),o[14]||(o[14]=u(" Clear all "))]),_:1,__:[14]})])])):y("",!0),t(e(Ft),{open:P.value,"onUpdate:open":o[4]||(o[4]=l=>P.value=l)},{default:a(()=>[t(e(Nt),{asChild:""},{default:a(()=>[t(e($),{variant:"ghost",class:"w-full mt-4 justify-center text-muted-foreground hover:text-foreground"},{default:a(()=>[t(e(Lt),{class:"h-4 w-4 mr-2"}),o[16]||(o[16]=u(" Advanced Filters ")),t(e(Dt),{class:Q(["h-4 w-4 ml-2 transition-transform duration-200",{"rotate-180":P.value}])},null,8,["class"])]),_:1,__:[16]})]),_:1}),t(e(Tt),{class:"mt-4"},{default:a(()=>[t(e(Z),null,{default:a(()=>[t(e(W),{class:"p-6"},{default:a(()=>[s("div",nu,[s("div",ru,[t(e(F),{class:"text-sm font-medium flex items-center gap-2"},{default:a(()=>[t(e(pe),{class:"h-4 w-4"}),o[17]||(o[17]=u(" Product Category "))]),_:1,__:[17]}),t(e(J),{modelValue:f.value.category,"onUpdate:modelValue":[o[2]||(o[2]=l=>f.value.category=l),ae]},{default:a(()=>[t(e(K),null,{default:a(()=>[t(e(ee),{placeholder:"All categories"})]),_:1}),t(e(te),null,{default:a(()=>[t(e(B),{value:"all"},{default:a(()=>o[18]||(o[18]=[u("All categories")])),_:1,__:[18]}),(r(!0),c(L,null,D(w.value,l=>(r(),O(e(B),{key:l.value,value:l.value},{default:a(()=>[u(i(l.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),s("div",du,[s("div",iu,i(ne.value.length)+" filter"+i(ne.value.length!==1?"s":"")+" applied ",1),s("div",cu,[t(e($),{variant:"outline",onClick:ve},{default:a(()=>[t(e(Oe),{class:"h-4 w-4 mr-2"}),o[19]||(o[19]=u(" Reset All "))]),_:1,__:[19]}),t(e($),{onClick:o[3]||(o[3]=l=>P.value=!1)},{default:a(()=>o[20]||(o[20]=[u(" Apply Filters ")])),_:1,__:[20]})])])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),s("div",null,[s("div",mu,[s("h2",vu,[o[21]||(o[21]=u(" Search Results ")),s("span",fu," ("+i(de.value)+" results found) ",1)]),s("div",pu,[o[26]||(o[26]=s("p",{class:"text-sm text-muted-foreground"},"Sort by:",-1)),t(e(J),{modelValue:C.value,"onUpdate:modelValue":[o[5]||(o[5]=l=>C.value=l),ae]},{default:a(()=>[t(e(K),{class:"w-[180px] h-8"},{default:a(()=>[t(e(ee))]),_:1}),t(e(te),null,{default:a(()=>[t(e(B),{value:"relevance"},{default:a(()=>o[22]||(o[22]=[u("Relevance")])),_:1,__:[22]}),t(e(B),{value:"newest"},{default:a(()=>o[23]||(o[23]=[u("Newest")])),_:1,__:[23]}),t(e(B),{value:"oldest"},{default:a(()=>o[24]||(o[24]=[u("Oldest")])),_:1,__:[24]}),t(e(B),{value:"name"},{default:a(()=>o[25]||(o[25]=[u("Name A-Z")])),_:1,__:[25]})]),_:1})]),_:1},8,["modelValue"])])]),V.value?(r(),c("div",gu,[(r(),c(L,null,D(6,l=>t(e(Z),{key:l,class:"animate-pulse"},{default:a(()=>[t(e(W),{class:"p-4"},{default:a(()=>o[27]||(o[27]=[s("div",{class:"space-y-3"},[s("div",{class:"h-32 bg-muted rounded"}),s("div",{class:"h-4 bg-muted rounded w-3/4"}),s("div",{class:"h-3 bg-muted rounded w-1/2"}),s("div",{class:"h-3 bg-muted rounded"})],-1)])),_:1,__:[27]})]),_:2},1024)),64))])):me.value.length>0?(r(),c("div",_u,[(r(!0),c(L,null,D(me.value,l=>(r(),O(e(Z),{key:l.id,class:"hover:shadow-md transition-shadow"},{default:a(()=>[t(e(W),{class:"p-0"},{default:a(()=>[s("div",xu,[s("img",{src:l.image,alt:l.name,class:"h-full w-full object-cover",loading:"lazy"},null,8,bu),s("div",yu,[t(e(H),{variant:"secondary",class:"text-xs"},{default:a(()=>[u(i(l.market),1)]),_:2},1024)]),l.isVerified?(r(),c("div",wu,[t(e(H),{variant:"default",class:"text-xs bg-green-500"},{default:a(()=>o[28]||(o[28]=[u(" Verified ")])),_:1,__:[28]})])):y("",!0)]),s("div",ku,[s("div",null,[s("h3",hu,i(l.name),1),t(e(H),{variant:"outline",class:"text-xs"},{default:a(()=>[u(i(l.category),1)]),_:2},1024)]),s("div",$u,[l.businessName?(r(),c("div",Cu,[t(e(ze),{class:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s("p",Su,i(l.businessName),1)])):y("",!0),l.location?(r(),c("div",Vu,[t(e(Ze),{class:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s("p",Pu,i(l.location),1)])):y("",!0),l.tags&&l.tags.length>0?(r(),c("div",Ru,[(r(!0),c(L,null,D(l.tags.slice(0,2),n=>(r(),c("div",{key:n.id,class:"inline-flex items-center gap-1 px-2 py-1 bg-secondary text-secondary-foreground text-xs rounded-sm"},[t(e(pe),{class:"h-3 w-3"}),u(" "+i(n.name),1)]))),128)),l.tags.length>2?(r(),c("div",Bu," +"+i(l.tags.length-2)+" more ",1)):y("",!0)])):y("",!0)]),s("div",Nu,[t(e($),{size:"sm",class:"flex items-center gap-2",onClick:n=>ye(l)},{default:a(()=>[t(e(dt),{class:"h-3 w-3"}),o[29]||(o[29]=u(" View More "))]),_:2,__:[29]},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))])):(r(),c("div",Tu,[s("div",Fu,[t(e(je),{class:"h-8 w-8 text-muted-foreground"})]),o[31]||(o[31]=s("h3",{class:"text-lg font-semibold mb-2"},"No results found",-1)),o[32]||(o[32]=s("p",{class:"text-muted-foreground mb-4"}," Try adjusting your search criteria or reset filters ",-1)),t(e($),{variant:"outline",onClick:ve},{default:a(()=>o[30]||(o[30]=[u(" Reset Filters ")])),_:1,__:[30]})])),me.value.length>0?(r(),c("div",Au,[s("p",Uu," Showing "+i(ce.value+1)+"-"+i(Math.min(xe.value,de.value))+" of "+i(de.value)+" results ",1),s("div",Iu,[t(e($),{variant:"outline",size:"icon",disabled:U.value===1,onClick:o[6]||(o[6]=l=>we(U.value-1))},{default:a(()=>[t(e(nt),{class:"h-4 w-4"})]),_:1},8,["disabled"]),(r(!0),c(L,null,D(be.value,l=>(r(),O(e($),{key:l,variant:l===U.value?"default":"outline",size:"sm",class:"h-8 w-8",onClick:n=>we(l)},{default:a(()=>[u(i(l),1)]),_:2},1032,["variant","onClick"]))),128)),t(e($),{variant:"outline",size:"icon",disabled:U.value===he.value,onClick:o[7]||(o[7]=l=>we(U.value+1))},{default:a(()=>[t(e(rt),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):y("",!0)]),t(e(Ie),{open:E.value,"onUpdate:open":o[10]||(o[10]=l=>E.value=l)},{default:a(()=>[t(e(Ne),{class:"sm:max-w-[900px] max-h-[90vh] flex flex-col p-0"},{default:a(()=>{var l,n,z,ke,Se,Le,De,qe,mt,vt,ft,pt,gt,_t,xt,bt,yt,wt,kt,ht;return[t(e(Te),{class:"px-6 py-4 border-b"},{default:a(()=>[t(e(Fe),null,{default:a(()=>o[33]||(o[33]=[u("Product Details")])),_:1,__:[33]}),t(e(Ae),null,{default:a(()=>o[34]||(o[34]=[u(" Detailed information about the product and business ")])),_:1,__:[34]})]),_:1}),s("div",ju,[p.value?(r(),c("div",Ou,[s("div",Mu,[s("img",{src:p.value.image,alt:p.value.name,class:"h-full w-full object-cover"},null,8,Eu)]),s("div",null,[s("div",Lu,[s("h2",Du,i(p.value.name),1),s("div",qu,[t(e(H),null,{default:a(()=>[u(i(p.value.market),1)]),_:1}),p.value.isVerified?(r(),O(e(H),{key:0,variant:"default",class:"bg-green-500"},{default:a(()=>o[35]||(o[35]=[u(" Verified ")])),_:1,__:[35]})):y("",!0)])]),s("div",zu,[t(e(H),{variant:"outline"},{default:a(()=>[u(i(p.value.category),1)]),_:1})])]),t(e(ge)),s("div",null,[o[38]||(o[38]=s("h3",{class:"font-semibold mb-3"},"Product Description",-1)),s("p",Yu,i(p.value.description),1),p.value.features?(r(),c("div",Hu,[o[37]||(o[37]=s("h4",{class:"font-medium mb-2"},"Key Features:",-1)),s("ul",Gu,[(r(!0),c(L,null,D(p.value.features,fe=>(r(),c("li",{key:fe,class:"flex items-center gap-2"},[o[36]||(o[36]=s("div",{class:"w-1.5 h-1.5 bg-primary rounded-full"},null,-1)),u(" "+i(fe),1)]))),128))])])):y("",!0)]),t(e(ge)),p.value.link?(r(),c("div",Xu,[o[39]||(o[39]=s("h3",{class:"font-semibold mb-3"},"Product Link",-1)),s("div",Qu,[s("a",{href:p.value.link,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 underline text-sm break-all"},i(p.value.link),9,Wu),s("button",{onClick:o[8]||(o[8]=fe=>Ce(p.value.link)),class:"text-gray-500 hover:text-gray-700 text-xs",type:"button"}," Copy ")])])):y("",!0),t(e(ge)),s("div",null,[s("div",Zu,[o[41]||(o[41]=s("h3",{class:"font-semibold"},"Business Information",-1)),s("div",Ju,[(l=p.value.business)!=null&&l.mofRegistration?(r(),O(e(H),{key:0,variant:"default",class:"text-xs bg-green-500"},{default:a(()=>[t(e(at),{class:"h-3 w-3 mr-1"}),o[40]||(o[40]=u(" MOF Registered "))]),_:1,__:[40]})):y("",!0),t(e(H),{variant:"secondary",class:"text-xs"},{default:a(()=>{var fe;return[u(i(ie((fe=p.value.business)==null?void 0:fe.type)),1)]}),_:1})])]),s("div",Ku,[s("div",en,[s("div",tn,[t(e(ze),{class:"h-5 w-5 text-muted-foreground mt-0.5"}),s("div",sn,[s("p",ln,i(((n=p.value.business)==null?void 0:n.name)||p.value.businessName),1),s("p",an,i(ie((z=p.value.business)==null?void 0:z.type)||p.value.businessType),1),(ke=p.value.business)!=null&&ke.ssm?(r(),c("p",on," SSM: "+i(p.value.business.ssm),1)):y("",!0)])]),s("div",un,[t(e(Ze),{class:"h-5 w-5 text-muted-foreground mt-0.5"}),s("div",nn,[s("p",rn,i(((Se=p.value.business)==null?void 0:Se.address)||p.value.location),1)])]),(Le=p.value.business)!=null&&Le.phone||(De=p.value.contact)!=null&&De.phone?(r(),c("div",dn,[t(e(lt),{class:"h-5 w-5 text-muted-foreground"}),s("p",cn,i(((qe=p.value.business)==null?void 0:qe.phone)||((mt=p.value.contact)==null?void 0:mt.phone)),1)])):y("",!0),(vt=p.value.business)!=null&&vt.url||(ft=p.value.contact)!=null&&ft.website?(r(),c("div",mn,[t(e(Je),{class:"h-5 w-5 text-muted-foreground"}),s("a",{href:((pt=p.value.business)==null?void 0:pt.url)||((gt=p.value.contact)==null?void 0:gt.website),target:"_blank",rel:"noopener noreferrer",class:"text-sm text-primary hover:underline truncate"},i(((_t=p.value.business)==null?void 0:_t.url)||((xt=p.value.contact)==null?void 0:xt.website)),9,vn)])):y("",!0)]),s("div",fn,[(bt=p.value.business)!=null&&bt.sector?(r(),c("div",pn,[t(e(pe),{class:"h-5 w-5 text-muted-foreground"}),s("div",null,[o[42]||(o[42]=s("p",{class:"text-sm font-medium"},"Business Sector",-1)),s("p",gn,i(k(p.value.business.sector)),1)])])):y("",!0),(yt=p.value.business)!=null&&yt.category?(r(),c("div",_n,[t(e(ze),{class:"h-5 w-5 text-muted-foreground"}),s("div",null,[o[43]||(o[43]=s("p",{class:"text-sm font-medium"},"Business Category",-1)),s("p",xn,i(d(p.value.business.category)),1)])])):y("",!0),(wt=p.value.business)!=null&&wt.mofRegistration&&((kt=p.value.business)!=null&&kt.mofRegistrationNumber)?(r(),c("div",bn,[t(e(at),{class:"h-5 w-5 text-muted-foreground"}),s("div",null,[o[44]||(o[44]=s("p",{class:"text-sm font-medium"},"MOF Registration",-1)),s("p",yn,i(p.value.business.mofRegistrationNumber),1)])])):y("",!0),(ht=p.value.business)!=null&&ht.createdAt?(r(),c("div",wn,[t(e(ot),{class:"h-5 w-5 text-muted-foreground"}),s("div",null,[o[45]||(o[45]=s("p",{class:"text-sm font-medium"},"Registered",-1)),s("p",kn,i(_(p.value.business.createdAt)),1)])])):y("",!0)])])])])):y("",!0)]),t(e(Ue),{class:"px-6 py-4 border-t gap-2"},{default:a(()=>{var fe;return[t(e($),{variant:"outline",onClick:o[9]||(o[9]=Cn=>E.value=!1)},{default:a(()=>o[46]||(o[46]=[u(" Close ")])),_:1,__:[46]}),(fe=p.value)!=null&&fe.link?(r(),O(e($),{key:0,variant:"secondary",class:"flex items-center gap-2",onClick:Re},{default:a(()=>[t(e(Je),{class:"h-4 w-4"}),o[47]||(o[47]=u(" Visit Product "))]),_:1,__:[47]})):y("",!0),t(e($),{class:"flex items-center gap-2",onClick:$e},{default:a(()=>[t(e(qt),{class:"h-4 w-4"}),o[48]||(o[48]=u(" Contact Business "))]),_:1,__:[48]})]}),_:1})]}),_:1})]),_:1},8,["open"])]))}}),$n=Ht(hn,[["__scopeId","data-v-42030b88"]]),Un=Object.freeze(Object.defineProperty({__proto__:null,default:$n},Symbol.toStringTag,{value:"Module"}));export{Nn as a,Tn as b,Fn as c,An as d,Un as e,Bn as i,Fl as u};
